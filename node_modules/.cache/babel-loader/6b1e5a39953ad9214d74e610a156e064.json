{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n/** @jsx jsx */\n\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _core = require('@emotion/core');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar useConstructor = function useConstructor() {\n  var callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n  var _useState = (0, _react.useState)(false),\n      hasBeenCalled = _useState[0],\n      setHasBeenCalled = _useState[1];\n\n  if (hasBeenCalled) return;\n  callBack();\n  setHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n  var selectedValue = props.selectedValue,\n      selectedCategory = props.selectedCategory,\n      value = props.value,\n      defaultValue = props.defaultValue,\n      componentId = props.componentId,\n      rawData = props.rawData,\n      aggregationData = props.aggregationData,\n      isLoading = props.isLoading,\n      error = props.error,\n      onData = props.onData,\n      onChange = props.onChange,\n      focusShortcuts = props.focusShortcuts,\n      defaultQuery = props.defaultQuery,\n      filterLabel = props.filterLabel,\n      showFilter = props.showFilter,\n      URLParams = props.URLParams,\n      customQuery = props.customQuery;\n  var internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n  var _useState2 = (0, _react.useState)(''),\n      currentValue = _useState2[0],\n      setCurrentValue = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(props.isOpen),\n      isOpen = _useState3[0],\n      setIsOpen = _useState3[1];\n\n  var _inputRef = (0, _react.useRef)(null);\n\n  var stats = function stats() {\n    return (0, _helper.getResultStats)(props);\n  };\n\n  var parsedSuggestions = function parsedSuggestions() {\n    var suggestionsArray = [];\n\n    if (Array.isArray(props.suggestions) && props.suggestions.length) {\n      suggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n    } else if (Array.isArray(props.defaultSuggestions) && props.defaultSuggestions.length) {\n      suggestionsArray = [].concat((0, _helper.withClickIds)(props.defaultSuggestions));\n    }\n\n    return suggestionsArray;\n  };\n\n  var focusSearchBox = function focusSearchBox(event) {\n    var elt = event.target || event.srcElement;\n    var tagName = elt.tagName;\n\n    if (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n      // already in an input\n      return;\n    }\n\n    if (_inputRef.current) {\n      _inputRef.current.focus();\n    }\n  };\n\n  var listenForFocusShortcuts = function listenForFocusShortcuts() {\n    if ((0, _utils.isEmpty)(focusShortcuts)) {\n      return;\n    } // for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\n\n    (0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n    /* eslint-disable no-shadow */\n    // eslint-disable-next-line no-unused-vars\n    function (event, handler) {\n      // Prevent the default refresh event under WINDOWS system\n      event.preventDefault();\n      focusSearchBox(event);\n    }); // if one of modifier keys are used, they are handled below\n\n    (0, _hotkeysJs2.default)('*', function (event) {\n      var modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n      if (modifierKeys.length === 0) return;\n\n      for (var index = 0; index < modifierKeys.length; index += 1) {\n        var element = modifierKeys[index];\n\n        if (_hotkeysJs2.default[element]) {\n          focusSearchBox(event);\n          break;\n        }\n      }\n    });\n  };\n\n  var triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var hitData = parsedSuggestions().find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData.source && hitData.source._id) {\n        docId = hitData.source._id;\n      }\n    }\n\n    props.triggerAnalytics(searchPosition, docId);\n  };\n\n  var shouldQuery = function shouldQuery(value, dataFields, props) {\n    var finalQuery = [];\n    var phrasePrefixFields = [];\n    var fields = dataFields.map(function (dataField) {\n      var queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\n      if (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n        phrasePrefixFields.push(queryField);\n      }\n\n      return queryField;\n    });\n\n    if (props.searchOperators || props.queryString) {\n      return {\n        query: value,\n        fields: fields,\n        default_operator: props.queryFormat\n      };\n    }\n\n    if (props.queryFormat === 'and') {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: fields,\n          type: 'cross_fields',\n          operator: 'and'\n        }\n      });\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: fields,\n          type: 'phrase',\n          operator: 'and'\n        }\n      });\n\n      if (phrasePrefixFields.length > 0) {\n        finalQuery.push({\n          multi_match: {\n            query: value,\n            fields: phrasePrefixFields,\n            type: 'phrase_prefix',\n            operator: 'and'\n          }\n        });\n      }\n\n      return finalQuery;\n    }\n\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'best_fields',\n        operator: 'or',\n        fuzziness: props.fuzziness ? props.fuzziness : 0\n      }\n    });\n    finalQuery.push({\n      multi_match: {\n        query: value,\n        fields: fields,\n        type: 'phrase',\n        operator: 'or'\n      }\n    });\n\n    if (phrasePrefixFields.length > 0) {\n      finalQuery.push({\n        multi_match: {\n          query: value,\n          fields: phrasePrefixFields,\n          type: 'phrase_prefix',\n          operator: 'or'\n        }\n      });\n    }\n\n    return finalQuery;\n  };\n\n  var searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n    var finalQuery = null;\n    var fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\n    if (value) {\n      if (props.queryString) {\n        finalQuery = {\n          query_string: shouldQuery(value, fields, props)\n        };\n      } else if (props.searchOperators) {\n        finalQuery = {\n          simple_query_string: shouldQuery(value, fields, props)\n        };\n      } else {\n        finalQuery = {\n          bool: {\n            should: shouldQuery(value, fields, props),\n            minimum_should_match: '1'\n          }\n        };\n      }\n    }\n\n    if (value === '') {\n      finalQuery = {\n        bool: {\n          should: shouldQuery(value, fields, props),\n          minimum_should_match: '1'\n        }\n      };\n    }\n\n    if (finalQuery && props.nestedField) {\n      finalQuery = {\n        nested: {\n          path: props.nestedField,\n          query: finalQuery\n        }\n      };\n    }\n\n    return finalQuery;\n  }; // fires query to fetch suggestion\n\n\n  var triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n    if (!props.autosuggest) {\n      return;\n    }\n\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n    var query = searchBoxDefaultQuery(value, props);\n\n    if (defaultQuery) {\n      var defaultQueryTobeSet = defaultQuery(value, props) || {};\n\n      if (defaultQueryTobeSet.query) {\n        query = defaultQueryTobeSet.query;\n      } // Update calculated default query in store\n\n\n      (0, _helper.updateDefaultQuery)(componentId, props, value);\n    }\n\n    props.updateQuery({\n      componentId: internalComponent,\n      query: query,\n      value: value,\n      componentType: _constants.componentTypes.searchBox\n    });\n  }; // fires query to fetch results(dependent components are affected here)\n\n\n  var triggerCustomQuery = function triggerCustomQuery(paramValue) {\n    var categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n    var value = typeof paramValue !== 'string' ? currentValue : paramValue;\n    var query = searchBoxDefaultQuery(value, props);\n\n    if (customQuery) {\n      var customQueryTobeSet = customQuery(value, props) || {};\n      var queryTobeSet = customQueryTobeSet.query;\n\n      if (queryTobeSet) {\n        query = queryTobeSet;\n      }\n\n      (0, _helper.updateCustomQuery)(componentId, props, value);\n    }\n\n    props.updateQuery({\n      componentId: componentId,\n      value: value,\n      query: query,\n      label: filterLabel,\n      showFilter: showFilter,\n      URLParams: URLParams,\n      componentType: _constants.componentTypes.searchBox,\n      category: categoryValue\n    });\n  };\n\n  var triggerQuery = function triggerQuery() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$isOpen = _ref.isOpen,\n        isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n        _ref$customQuery = _ref.customQuery,\n        customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n        _ref$defaultQuery = _ref.defaultQuery,\n        defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n        _ref$value = _ref.value,\n        value = _ref$value === undefined ? undefined : _ref$value,\n        _ref$categoryValue = _ref.categoryValue,\n        categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n    if (typeof isOpen === 'boolean') {\n      setIsOpen(isOpen);\n    }\n\n    if (customQuery) {\n      triggerCustomQuery(value, categoryValue);\n    }\n\n    if (defaultQuery) {\n      triggerDefaultQuery(value);\n    }\n  };\n\n  var onValueSelected = function onValueSelected() {\n    var valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n    var cause = arguments[1];\n    var suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var onValueSelected = props.onValueSelected;\n\n    if (onValueSelected) {\n      onValueSelected(valueSelected, cause, suggestion);\n    }\n  };\n\n  var handleTextChange = (0, _helper.debounce)(function () {\n    var valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n    var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n    if (cause === _causes2.default.CLEAR_VALUE) {\n      triggerCustomQuery(valueParam);\n      triggerDefaultQuery(valueParam);\n    } else if (props.autosuggest) {\n      triggerDefaultQuery(valueParam);\n    } else if (value === undefined && !onChange) {\n      triggerCustomQuery(valueParam);\n    }\n  }, props.debounce);\n\n  var setValue = function setValue(value) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n    var cause = arguments[3];\n    var hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n    var toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n    var categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n    var performUpdate = function performUpdate() {\n      if (hasMounted) {\n        if (toggleIsOpen) setIsOpen(!isOpen);\n        setCurrentValue(value);\n\n        if (isDefaultValue) {\n          if (props.autosuggest) {\n            triggerQuery(_extends({}, toggleIsOpen && {\n              isOpen: !isOpen\n            }, {\n              defaultQuery: true,\n              value: value\n            }));\n          } // in case of strict selection only SUGGESTION_SELECT should be able\n          // to set the query otherwise the value should reset\n\n\n          if (setValueProps.strictSelection) {\n            if (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n              triggerCustomQuery(value, categoryValue);\n            } else {\n              setValue('', true);\n            }\n          } else {\n            triggerCustomQuery(value, categoryValue);\n          }\n        } else {\n          // debounce for handling text while typing\n          handleTextChange(value, cause);\n        }\n\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      } else {\n        triggerQuery({\n          defaultQuery: props.autosuggest,\n          customQuery: true,\n          value: value,\n          categoryValue: categoryValue\n        });\n        if (setValueProps.onValueChange) setValueProps.onValueChange(value);\n      }\n    };\n\n    (0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n  };\n\n  var withTriggerQuery = function withTriggerQuery(func) {\n    if (func) {\n      return function (e) {\n        return func(e, function (_ref2) {\n          var isOpen = _ref2.isOpen;\n          return setValue(props.value, !isOpen, props);\n        });\n      };\n    }\n\n    return undefined;\n  };\n\n  var onSuggestionSelected = function onSuggestionSelected(suggestion) {\n    setIsOpen(false);\n    var suggestionValue = suggestion.value;\n\n    if (value === undefined) {\n      setValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n    } else if (onChange) {\n      onChange(suggestionValue, function () {\n        return triggerQuery({\n          customQuery: true,\n          value: suggestionValue,\n          categoryValue: suggestion._category\n        });\n      });\n    } // Record analytics for selected suggestions\n\n\n    triggerClickAnalytics(suggestion._click_id); // onValueSelected is user interaction driven:\n    // it should be triggered irrespective of controlled (or)\n    // uncontrolled component behavior\n\n    onValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n  };\n\n  var onInputChange = function onInputChange(e) {\n    var inputValue = e.target.value;\n\n    if (!isOpen && props.autosuggest) {\n      setIsOpen(true);\n    }\n\n    if (value === undefined) {\n      setValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n    } else if (onChange) {\n      // handle caret position in controlled components\n      (0, _utils.handleCaretPosition)(e);\n      onChange(inputValue, function () {\n        var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref3.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: inputValue,\n          isOpen: isOpen\n        });\n      }, e);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event, highlightedIndex) {\n    // if a suggestion was selected, delegate the handling\n    // to suggestion handler\n    if (event.key === 'Enter' && highlightedIndex === null) {\n      setValue(event.target.value, true);\n      onValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n    }\n\n    if (props.onKeyDown) {\n      props.onKeyDown(event, undefined.triggerQuery);\n    }\n  };\n\n  var clearValue = function clearValue() {\n    setValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\n    if (onChange) {\n      onChange('', function () {\n        var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            isOpen = _ref4.isOpen;\n\n        return triggerQuery({\n          customQuery: true,\n          value: '',\n          isOpen: isOpen\n        });\n      });\n    }\n\n    onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n  };\n\n  var shouldMicRender = function shouldMicRender(showVoiceSearch) {\n    // checks for SSR\n    if (typeof window === 'undefined') return false;\n    return showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n  };\n\n  var handleStateChange = function handleStateChange(changes) {\n    var isOpen = changes.isOpen,\n        type = changes.type;\n\n    if (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n      setIsOpen(isOpen);\n    }\n  };\n\n  var getBackgroundColor = function getBackgroundColor(highlightedIndex, index) {\n    var isDark = props.themePreset === 'dark';\n\n    if (isDark) {\n      return highlightedIndex === index ? '#555' : '#424242';\n    }\n\n    return highlightedIndex === index ? '#eee' : '#fff';\n  };\n\n  var handleSearchIconClick = function handleSearchIconClick() {\n    if (currentValue.trim()) {\n      setValue(currentValue, true);\n      onValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n    }\n  };\n\n  var handleVoiceResults = function handleVoiceResults(_ref5) {\n    var results = _ref5.results;\n\n    if (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n      setValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n    }\n  };\n\n  var renderNoSuggestion = function renderNoSuggestion() {\n    var finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        renderNoSuggestion = props.renderNoSuggestion,\n        innerClass = props.innerClass,\n        error = props.error,\n        renderError = props.renderError;\n\n    if (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        themePreset: themePreset,\n        theme: theme,\n        innerClassName: 'noSuggestion'\n      }, typeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion);\n    }\n\n    return null;\n  };\n\n  var renderLoader = function renderLoader() {\n    var loader = props.loader,\n        isLoading = props.isLoading,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        innerClass = props.innerClass;\n\n    if (isLoading && loader && currentValue) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'loader',\n        theme: theme,\n        themePreset: themePreset\n      }, loader);\n    }\n\n    return null;\n  };\n\n  var renderError = function renderError() {\n    var error = props.error,\n        renderError = props.renderError,\n        themePreset = props.themePreset,\n        theme = props.theme,\n        isLoading = props.isLoading,\n        innerClass = props.innerClass;\n\n    if (error && renderError && currentValue && !isLoading) {\n      return (0, _core.jsx)(_SuggestionWrapper2.default, {\n        innerClass: innerClass,\n        innerClassName: 'error',\n        theme: theme,\n        themePreset: themePreset\n      }, (0, _utils.isFunction)(renderError) ? renderError(error) : renderError);\n    }\n\n    return null;\n  };\n\n  var getComponent = function getComponent() {\n    var downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var error = props.error,\n        isLoading = props.isLoading,\n        rawData = props.rawData;\n    var data = {\n      error: error,\n      loading: isLoading,\n      downshiftProps: downshiftProps,\n      data: props.suggestions,\n      value: currentValue,\n      triggerClickAnalytics: triggerClickAnalytics,\n      resultStats: stats(),\n      rawData: rawData\n    };\n    return (0, _utils.getComponent)(data, props);\n  };\n\n  var renderInputAddonBefore = function renderInputAddonBefore() {\n    var addonBefore = props.addonBefore;\n\n    if (addonBefore) {\n      return (0, _core.jsx)(_InputAddon2.default, null, addonBefore);\n    }\n\n    return null;\n  };\n\n  var renderInputAddonAfter = function renderInputAddonAfter() {\n    var addonAfter = props.addonAfter;\n\n    if (addonAfter) {\n      return (0, _core.jsx)(_InputAddon2.default, null, addonAfter);\n    }\n\n    return null;\n  };\n\n  var renderIcon = function renderIcon() {\n    if (props.showIcon) {\n      return props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderCancelIcon = function renderCancelIcon() {\n    if (props.showClear) {\n      return props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n    }\n\n    return null;\n  };\n\n  var renderIcons = function renderIcons() {\n    var showIcon = props.showIcon,\n        showClear = props.showClear,\n        renderMic = props.renderMic,\n        getMicInstance = props.getMicInstance,\n        showVoiceSearch = props.showVoiceSearch,\n        iconPosition = props.iconPosition,\n        innerClass = props.innerClass;\n    return (0, _core.jsx)('div', null, (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'right',\n      positionType: 'absolute'\n    }, currentValue && showClear && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: clearValue,\n      showIcon: showIcon,\n      isClearIcon: true\n    }, renderCancelIcon()), shouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n      getInstance: getMicInstance,\n      render: renderMic,\n      onResult: handleVoiceResults,\n      className: (0, _helper.getClassName)(innerClass, 'mic') || null\n    }), iconPosition === 'right' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())), (0, _core.jsx)(_IconGroup2.default, {\n      groupPosition: 'left',\n      positionType: 'absolute'\n    }, iconPosition === 'left' && (0, _core.jsx)(_IconWrapper2.default, {\n      onClick: handleSearchIconClick\n    }, renderIcon())));\n  };\n\n  var handleFocus = function handleFocus(event) {\n    if (props.autosuggest && !onChange) {\n      setIsOpen(true);\n    }\n\n    if (props.onFocus) {\n      props.onFocus(event, triggerQuery);\n    }\n  };\n\n  var onAutofillClick = function onAutofillClick(suggestion) {\n    var value = suggestion.value;\n    setIsOpen(true);\n    setCurrentValue(value);\n    triggerDefaultQuery(value);\n  };\n\n  var hasMounted = (0, _react.useRef)();\n  useConstructor(function () {\n    if (!props.enableAppbase) {\n      throw new Error('enableAppbase is required to be true when using SearchBox component.');\n    }\n\n    var currentLocalValue = selectedValue || value || defaultValue || '';\n    hasMounted.current = false;\n\n    if (currentLocalValue) {\n      if (props.onChange) {\n        props.onChange(currentLocalValue, function () {\n          var _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n              isOpen = _ref6.isOpen;\n\n          return triggerQuery({\n            customQuery: true,\n            value: currentLocalValue,\n            isOpen: isOpen\n          });\n        });\n      }\n    }\n\n    setCurrentValue(currentLocalValue); // Set custom and default queries in store\n\n    triggerCustomQuery(currentLocalValue, selectedCategory);\n    triggerDefaultQuery(currentLocalValue, selectedCategory);\n  });\n  (0, _react.useEffect)(function () {\n    if (onData) {\n      onData({\n        data: parsedSuggestions(),\n        rawData: rawData,\n        aggregationData: aggregationData,\n        loading: isLoading,\n        error: error\n      });\n    }\n  }, [rawData, aggregationData, isLoading, error]);\n  (0, _react.useEffect)(function () {\n    if (hasMounted.current) {\n      if (value !== undefined && currentValue !== value) {\n        setValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, undefined, undefined, false);\n      }\n    }\n  }, [value]);\n  (0, _react.useEffect)(function () {\n    if ( // since, selectedValue will be updated when currentValue changes,\n    // we must only check for the changes introduced by\n    // clear action from SelectedFilters component in which case,\n    // the currentValue will never match the updated selectedValue\n    // currentValue !== props.defaultValue &&\n    hasMounted.current && currentValue !== selectedValue && !(typeof currentValue !== 'string' && !selectedValue)) {\n      if (!selectedValue && currentValue) {\n        // selected value is cleared, call onValueSelected\n        onValueSelected('', _causes2.default.CLEAR_VALUE, null);\n      }\n\n      if (value === undefined) {\n        setValue(selectedValue || '', true, props, undefined, hasMounted.current, false);\n      } else if (onChange) {\n        if (value !== selectedValue && selectedValue !== currentValue) {\n          // value prop exists\n          onChange(selectedValue || '', function () {\n            var _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                isOpen = _ref7.isOpen;\n\n            return triggerQuery({\n              customQuery: true,\n              value: selectedValue || '',\n              isOpen: isOpen\n            });\n          });\n        }\n      } else {\n        // value prop exists and onChange is not defined:\n        // we need to put the current value back into the store\n        // if the clear action was triggered by interacting with\n        // selected-filters component\n        setValue(currentValue, true, props, undefined, true, false);\n      }\n    }\n  }, [selectedValue]);\n  (0, _react.useEffect)(function () {\n    hasMounted.current = true; // register hotkeys for listening to focusShortcuts' key presses\n\n    listenForFocusShortcuts();\n  }, []);\n\n  var hasSuggestions = function hasSuggestions() {\n    return Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n  };\n\n  return (0, _core.jsx)(_Container2.default, {\n    style: props.style,\n    className: props.className\n  }, props.title && (0, _core.jsx)(_Title2.default, {\n    className: (0, _helper.getClassName)(props.innerClass, 'title') || null\n  }, props.title), props.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n    id: props.componentId + '-downshift',\n    onChange: onSuggestionSelected,\n    onStateChange: handleStateChange,\n    isOpen: isOpen,\n    itemToString: function itemToString(i) {\n      return i;\n    },\n    render: function render(_ref8) {\n      var getRootProps = _ref8.getRootProps,\n          getInputProps = _ref8.getInputProps,\n          getItemProps = _ref8.getItemProps,\n          isOpen = _ref8.isOpen,\n          highlightedIndex = _ref8.highlightedIndex,\n          setHighlightedIndex = _ref8.setHighlightedIndex,\n          rest = _objectWithoutProperties(_ref8, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n      var renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n        var getIcon = function getIcon(iconType) {\n          switch (iconType) {\n            case _utils.suggestionTypes.Recent:\n              return props.recentSearchesIcon;\n\n            case _utils.suggestionTypes.Popular:\n              return props.popularSearchesIcon;\n\n            default:\n              return null;\n          }\n        };\n\n        return (0, _core.jsx)(_react2.default.Fragment, null, (0, _utils.hasCustomRenderer)(props) && getComponent(_extends({\n          getInputProps: getInputProps,\n          getItemProps: getItemProps,\n          isOpen: isOpen,\n          highlightedIndex: highlightedIndex,\n          setHighlightedIndex: setHighlightedIndex\n        }, rest)), isOpen && renderLoader(), isOpen && renderError(), !(0, _utils.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)('ul', {\n          css: (0, _Input.suggestions)(props.themePreset, props.theme),\n          className: (0, _helper.getClassName)(props.innerClass, 'list')\n        }, parsedSuggestions().map(function (item, index) {\n          return (0, _core.jsx)('li', _extends({}, getItemProps({\n            item: item\n          }), {\n            key: index + 1 + '-' + item.value,\n            style: {\n              backgroundColor: getBackgroundColor(highlightedIndex, index),\n              justifyContent: 'flex-start',\n              alignItems: 'center'\n            }\n          }), props.renderItem ? props.renderItem(item) : (0, _core.jsx)(_react2.default.Fragment, null, (0, _core.jsx)('div', {\n            style: {\n              padding: '0 10px 0 0',\n              display: 'flex'\n            }\n          }, (0, _core.jsx)(_CustomSvg2.default, {\n            iconId: index + 1 + '-' + item.value + '-icon',\n            className: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n            icon: getIcon(item._suggestion_type),\n            type: item._suggestion_type + '-search-icon'\n          })), (0, _core.jsx)(_SuggestionItem2.default, {\n            currentValue: currentValue || '',\n            suggestion: item\n          }), item._category ? null : (0, _core.jsx)(_AutofillSvg2.default, {\n            onClick: function onClick(e) {\n              e.stopPropagation();\n              onAutofillClick(item);\n            }\n          })));\n        })) : renderNoSuggestion(parsedSuggestions()));\n      };\n\n      return (0, _core.jsx)('div', getRootProps({\n        css: _Input.suggestionsContainer\n      }, {\n        suppressRefError: true\n      }), (0, _core.jsx)(_InputGroup2.default, null, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, _extends({\n        'aria-label': props.componentId,\n        id: props.componentId + '-input',\n        showIcon: props.showIcon,\n        showClear: props.showClear,\n        iconPosition: props.iconPosition,\n        ref: _inputRef\n      }, getInputProps({\n        className: (0, _helper.getClassName)(props.innerClass, 'input'),\n        placeholder: props.placeholder,\n        value: currentValue === null ? '' : currentValue,\n        onChange: onInputChange,\n        onBlur: withTriggerQuery(props.onBlur),\n        onFocus: handleFocus,\n        onClick: function onClick() {\n          // clear highlighted index\n          setHighlightedIndex(null);\n        },\n        onKeyPress: withTriggerQuery(props.onKeyPress),\n        onKeyDown: function onKeyDown(e) {\n          return handleKeyDown(e, highlightedIndex);\n        },\n        onKeyUp: withTriggerQuery(props.onKeyUp),\n        autoFocus: props.autoFocus\n      }), {\n        themePreset: props.themePreset,\n        type: props.type\n      })), renderIcons(), !props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))), renderInputAddonAfter()), props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest)));\n    }\n  }, props.downShiftProps)) : (0, _core.jsx)('div', {\n    css: _Input.suggestionsContainer\n  }, (0, _core.jsx)(_InputGroup2.default, null, renderInputAddonBefore(), (0, _core.jsx)(_InputWrapper2.default, null, (0, _core.jsx)(_Input2.default, {\n    'aria-label': props.componentId,\n    className: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n    placeholder: props.placeholder,\n    value: currentValue || '',\n    onChange: onInputChange,\n    onBlur: withTriggerQuery(props.onBlur),\n    onFocus: withTriggerQuery(props.onFocus),\n    onKeyPress: withTriggerQuery(props.onKeyPress),\n    onKeyDown: withTriggerQuery(props.onKeyDown),\n    onKeyUp: withTriggerQuery(props.onKeyUp),\n    autoFocus: props.autoFocus,\n    iconPosition: props.iconPosition,\n    showIcon: props.showIcon,\n    showClear: props.showClear,\n    themePreset: props.themePreset\n  }), renderIcons()), renderInputAddonAfter())));\n};\n\nSearchBox.propTypes = {\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  selectedCategory: _types2.default.string,\n  suggestions: _types2.default.suggestions,\n  triggerAnalytics: _types2.default.funcRequired,\n  error: _types2.default.title,\n  isLoading: _types2.default.bool,\n  time: _types2.default.number,\n  enableAppbase: _types2.default.bool,\n  rawData: _types2.default.rawData,\n  aggregationData: _types2.default.aggregationData,\n  // component props\n  autoFocus: _types2.default.bool,\n  autosuggest: _types2.default.bool,\n  enableSynonyms: _types2.default.bool,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  index: _types2.default.string,\n  enablePopularSuggestions: _types2.default.bool,\n  enableRecentSuggestions: _types2.default.bool,\n  queryString: _types2.default.bool,\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  clearIcon: _types2.default.children,\n  componentId: _types2.default.stringRequired,\n  customHighlight: _types2.default.func,\n  customQuery: _types2.default.func,\n  defaultQuery: _types2.default.func,\n  dataField: _types2.default.dataFieldValidator,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  size: _types2.default.number,\n  debounce: _types2.default.number,\n  defaultValue: _types2.default.string,\n  value: _types2.default.string,\n  defaultSuggestions: _types2.default.suggestions,\n  customData: _types2.default.title,\n  downShiftProps: _types2.default.props,\n  children: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  fieldWeights: _types2.default.fieldWeights,\n  filterLabel: _types2.default.string,\n  fuzziness: _types2.default.fuzziness,\n  highlight: _types2.default.bool,\n  highlightField: _types2.default.stringOrArray,\n  icon: _types2.default.children,\n  iconPosition: _types2.default.iconPosition,\n  innerClass: _types2.default.style,\n  includeFields: _types2.default.includeFields,\n  loader: _types2.default.title,\n  nestedField: _types2.default.string,\n  onError: _types2.default.func,\n  onBlur: _types2.default.func,\n  onFocus: _types2.default.func,\n  onKeyDown: _types2.default.func,\n  onKeyPress: _types2.default.func,\n  onKeyUp: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  onChange: _types2.default.func,\n  onValueSelected: _types2.default.func,\n  placeholder: _types2.default.string,\n  queryFormat: _types2.default.queryFormatSearch,\n  react: _types2.default.react,\n  render: _types2.default.func,\n  renderError: _types2.default.title,\n  renderNoSuggestion: _types2.default.title,\n  showClear: _types2.default.bool,\n  showDistinctSuggestions: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  showIcon: _types2.default.bool,\n  showVoiceSearch: _types2.default.bool,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  theme: _types2.default.style,\n  themePreset: _types2.default.themePreset,\n  type: _types2.default.string,\n  URLParams: _types2.default.bool,\n  strictSelection: _types2.default.bool,\n  searchOperators: _types2.default.bool,\n  enablePredictiveSuggestions: _types2.default.bool,\n  recentSearchesIcon: _types2.default.componentObject,\n  popularSearchesIcon: _types2.default.componentObject,\n  // Mic props\n  getMicInstance: _types2.default.func,\n  renderMic: _types2.default.func,\n  //\n  focusShortcuts: _types2.default.focusShortcuts,\n  addonBefore: _types2.default.children,\n  addonAfter: _types2.default.children,\n  expandSuggestionsContainer: _types2.default.bool,\n  popularSuggestionsConfig: _types2.default.componentObject,\n  recentSuggestionsConfig: _types2.default.componentObject,\n  applyStopwords: _types2.default.bool,\n  customStopwords: _types2.default.stringArray,\n  onData: _types2.default.func,\n  renderItem: _types2.default.func,\n  isOpen: _types2.default.bool\n};\nSearchBox.defaultProps = {\n  autosuggest: true,\n  className: null,\n  debounce: 0,\n  downShiftProps: {},\n  enableSynonyms: true,\n  enablePopularSuggestions: false,\n  excludeFields: [],\n  iconPosition: 'left',\n  includeFields: ['*'],\n  placeholder: 'Search',\n  queryFormat: 'or',\n  showFilter: true,\n  showIcon: true,\n  showVoiceSearch: false,\n  style: {},\n  URLParams: false,\n  showClear: false,\n  showDistinctSuggestions: true,\n  strictSelection: false,\n  searchOperators: false,\n  size: 10,\n  time: 0,\n  focusShortcuts: ['/'],\n  addonBefore: undefined,\n  addonAfter: undefined,\n  expandSuggestionsContainer: true,\n  suggestions: [],\n  isOpen: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n    selectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n    suggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    aggregationData: state.compositeAggregations[props.componentId],\n    themePreset: state.config.themePreset,\n    isLoading: !!state.isLoading[props.componentId + '_active'],\n    error: state.error[props.componentId],\n    enableAppbase: state.config.enableAppbase,\n    time: state.hits[props.componentId] && state.hits[props.componentId].time,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n      return dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n    },\n    setCustomQuery: function setCustomQuery(component, query) {\n      return dispatch((0, _actions.setCustomQuery)(component, query));\n    },\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(_ComponentWrapper2.default, _extends({}, props, {\n    internalComponent: true,\n    componentType: _constants.componentTypes.searchBox\n  }), function () {\n    return (0, _core.jsx)(SearchBox, _extends({\n      ref: props.myForwardedRef\n    }, props));\n  });\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["/Users/karina/Main/Study/Web Dev/test-api/node_modules/@appbaseio/reactivesearch/lib/components/search/SearchBox.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_constants","require","_transform","_core","_emotionTheming","_causes","_causes2","_interopRequireDefault","_helper","_downshift","_downshift2","_hoistNonReactStatics","_hoistNonReactStatics2","_react","_react2","_types","_types2","_actions","_hotkeysJs","_hotkeysJs2","_ComponentWrapper","_ComponentWrapper2","_InputGroup","_InputGroup2","_InputWrapper","_InputWrapper2","_InputAddon","_InputAddon2","_IconGroup","_IconGroup2","_IconWrapper","_IconWrapper2","_SearchSvg","_SearchSvg2","_Container","_Container2","_Title","_Title2","_Input","_Input2","_SuggestionItem","_SuggestionItem2","_utils","_Mic","_Mic2","_CancelSvg","_CancelSvg2","_CustomSvg","_CustomSvg2","_SuggestionWrapper","_SuggestionWrapper2","_AutofillSvg","_AutofillSvg2","obj","default","_objectWithoutProperties","keys","indexOf","useConstructor","callBack","undefined","_useState","useState","hasBeenCalled","setHasBeenCalled","SearchBox","props","selectedValue","selectedCategory","value","defaultValue","componentId","rawData","aggregationData","isLoading","error","onData","onChange","focusShortcuts","defaultQuery","filterLabel","showFilter","URLParams","customQuery","internalComponent","getInternalComponentID","_useState2","currentValue","setCurrentValue","_useState3","isOpen","setIsOpen","_inputRef","useRef","stats","getResultStats","parsedSuggestions","suggestionsArray","Array","isArray","suggestions","concat","withClickIds","defaultSuggestions","focusSearchBox","event","elt","srcElement","tagName","isContentEditable","current","focus","listenForFocusShortcuts","isEmpty","parseFocusShortcuts","join","handler","preventDefault","modifierKeys","extractModifierKeysFromFocusShortcuts","index","element","triggerClickAnalytics","searchPosition","documentId","docId","hitData","find","hit","_click_id","_id","triggerAnalytics","shouldQuery","dataFields","finalQuery","phrasePrefixFields","fields","map","dataField","queryField","field","weight","endsWith","push","searchOperators","queryString","query","default_operator","queryFormat","multi_match","type","operator","fuzziness","searchBoxDefaultQuery","normalizeDataField","fieldWeights","query_string","simple_query_string","bool","should","minimum_should_match","nestedField","nested","path","triggerDefaultQuery","paramValue","autosuggest","defaultQueryTobeSet","updateDefaultQuery","updateQuery","componentType","componentTypes","searchBox","triggerCustomQuery","categoryValue","customQueryTobeSet","queryTobeSet","updateCustomQuery","label","category","triggerQuery","_ref","_ref$isOpen","_ref$customQuery","_ref$defaultQuery","_ref$value","_ref$categoryValue","onValueSelected","valueSelected","cause","suggestion","handleTextChange","debounce","valueParam","CLEAR_VALUE","setValue","isDefaultValue","setValueProps","hasMounted","toggleIsOpen","performUpdate","strictSelection","SUGGESTION_SELECT","onValueChange","checkValueChange","beforeValueChange","withTriggerQuery","func","e","_ref2","onSuggestionSelected","suggestionValue","_category","onInputChange","inputValue","handleCaretPosition","_ref3","handleKeyDown","highlightedIndex","ENTER_PRESS","onKeyDown","clearValue","_ref4","shouldMicRender","showVoiceSearch","window","webkitSpeechRecognition","SpeechRecognition","handleStateChange","changes","stateChangeTypes","mouseUp","getBackgroundColor","isDark","themePreset","handleSearchIconClick","trim","SEARCH_ICON_CLICK","handleVoiceResults","_ref5","results","isFinal","transcript","renderNoSuggestion","finalSuggestionsList","theme","innerClass","renderError","jsx","innerClassName","renderLoader","loader","isFunction","getComponent","downshiftProps","data","loading","resultStats","renderInputAddonBefore","addonBefore","renderInputAddonAfter","addonAfter","renderIcon","showIcon","icon","renderCancelIcon","showClear","clearIcon","renderIcons","renderMic","getMicInstance","iconPosition","groupPosition","positionType","onClick","isClearIcon","getInstance","render","onResult","className","getClassName","handleFocus","onFocus","onAutofillClick","enableAppbase","Error","currentLocalValue","_ref6","useEffect","_ref7","hasSuggestions","style","title","id","onStateChange","itemToString","_ref8","getRootProps","getInputProps","getItemProps","setHighlightedIndex","rest","renderSuggestionsDropdown","getIcon","iconType","suggestionTypes","Recent","recentSearchesIcon","Popular","popularSearchesIcon","Fragment","hasCustomRenderer","css","item","backgroundColor","justifyContent","alignItems","renderItem","padding","display","iconId","_suggestion_type","stopPropagation","suggestionsContainer","suppressRefError","ref","placeholder","onBlur","onKeyPress","onKeyUp","autoFocus","expandSuggestionsContainer","apply","downShiftProps","propTypes","funcRequired","string","time","number","enableSynonyms","distinctField","distinctFieldConfig","componentObject","enablePopularSuggestions","enableRecentSuggestions","children","stringRequired","customHighlight","dataFieldValidator","aggregationField","aggregationSize","size","customData","excludeFields","highlight","highlightField","stringOrArray","includeFields","onError","onQueryChange","queryFormatSearch","react","showDistinctSuggestions","enablePredictiveSuggestions","popularSuggestionsConfig","recentSuggestionsConfig","applyStopwords","customStopwords","stringArray","defaultProps","mapStateToProps","state","selectedValues","hits","compositeAggregations","config","total","hidden","mapDispatchtoProps","dispatch","updateQueryObject","recordSuggestionClick","setCustomQuery","component","setDefaultQuery","ConnectedComponent","connect","withTheme","myForwardedRef","ForwardRefComponent","forwardRef","displayName"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; /** @jsx jsx */\n\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _core = require('@emotion/core');\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _causes = require('@appbaseio/reactivecore/lib/utils/causes');\n\nvar _causes2 = _interopRequireDefault(_causes);\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _downshift = require('downshift');\n\nvar _downshift2 = _interopRequireDefault(_downshift);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _hotkeysJs = require('hotkeys-js');\n\nvar _hotkeysJs2 = _interopRequireDefault(_hotkeysJs);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nvar _InputGroup = require('../../styles/InputGroup');\n\nvar _InputGroup2 = _interopRequireDefault(_InputGroup);\n\nvar _InputWrapper = require('../../styles/InputWrapper');\n\nvar _InputWrapper2 = _interopRequireDefault(_InputWrapper);\n\nvar _InputAddon = require('../../styles/InputAddon');\n\nvar _InputAddon2 = _interopRequireDefault(_InputAddon);\n\nvar _IconGroup = require('../../styles/IconGroup');\n\nvar _IconGroup2 = _interopRequireDefault(_IconGroup);\n\nvar _IconWrapper = require('../../styles/IconWrapper');\n\nvar _IconWrapper2 = _interopRequireDefault(_IconWrapper);\n\nvar _SearchSvg = require('../shared/SearchSvg');\n\nvar _SearchSvg2 = _interopRequireDefault(_SearchSvg);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Input = require('../../styles/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _SuggestionItem = require('./addons/SuggestionItem');\n\nvar _SuggestionItem2 = _interopRequireDefault(_SuggestionItem);\n\nvar _utils = require('../../utils');\n\nvar _Mic = require('./addons/Mic');\n\nvar _Mic2 = _interopRequireDefault(_Mic);\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nvar _CustomSvg = require('../shared/CustomSvg');\n\nvar _CustomSvg2 = _interopRequireDefault(_CustomSvg);\n\nvar _SuggestionWrapper = require('./addons/SuggestionWrapper');\n\nvar _SuggestionWrapper2 = _interopRequireDefault(_SuggestionWrapper);\n\nvar _AutofillSvg = require('../shared/AutofillSvg');\n\nvar _AutofillSvg2 = _interopRequireDefault(_AutofillSvg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar useConstructor = function useConstructor() {\n\tvar callBack = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n\tvar _useState = (0, _react.useState)(false),\n\t    hasBeenCalled = _useState[0],\n\t    setHasBeenCalled = _useState[1];\n\n\tif (hasBeenCalled) return;\n\tcallBack();\n\tsetHasBeenCalled(true);\n};\n\nvar SearchBox = function SearchBox(props) {\n\tvar selectedValue = props.selectedValue,\n\t    selectedCategory = props.selectedCategory,\n\t    value = props.value,\n\t    defaultValue = props.defaultValue,\n\t    componentId = props.componentId,\n\t    rawData = props.rawData,\n\t    aggregationData = props.aggregationData,\n\t    isLoading = props.isLoading,\n\t    error = props.error,\n\t    onData = props.onData,\n\t    onChange = props.onChange,\n\t    focusShortcuts = props.focusShortcuts,\n\t    defaultQuery = props.defaultQuery,\n\t    filterLabel = props.filterLabel,\n\t    showFilter = props.showFilter,\n\t    URLParams = props.URLParams,\n\t    customQuery = props.customQuery;\n\n\n\tvar internalComponent = (0, _transform.getInternalComponentID)(componentId);\n\n\tvar _useState2 = (0, _react.useState)(''),\n\t    currentValue = _useState2[0],\n\t    setCurrentValue = _useState2[1];\n\n\tvar _useState3 = (0, _react.useState)(props.isOpen),\n\t    isOpen = _useState3[0],\n\t    setIsOpen = _useState3[1];\n\n\tvar _inputRef = (0, _react.useRef)(null);\n\tvar stats = function stats() {\n\t\treturn (0, _helper.getResultStats)(props);\n\t};\n\n\tvar parsedSuggestions = function parsedSuggestions() {\n\t\tvar suggestionsArray = [];\n\t\tif (Array.isArray(props.suggestions) && props.suggestions.length) {\n\t\t\tsuggestionsArray = [].concat((0, _helper.withClickIds)(props.suggestions));\n\t\t} else if (Array.isArray(props.defaultSuggestions) && props.defaultSuggestions.length) {\n\t\t\tsuggestionsArray = [].concat((0, _helper.withClickIds)(props.defaultSuggestions));\n\t\t}\n\t\treturn suggestionsArray;\n\t};\n\tvar focusSearchBox = function focusSearchBox(event) {\n\t\tvar elt = event.target || event.srcElement;\n\t\tvar tagName = elt.tagName;\n\t\tif (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n\t\t\t// already in an input\n\t\t\treturn;\n\t\t}\n\n\t\tif (_inputRef.current) {\n\t\t\t_inputRef.current.focus();\n\t\t}\n\t};\n\tvar listenForFocusShortcuts = function listenForFocusShortcuts() {\n\t\tif ((0, _utils.isEmpty)(focusShortcuts)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// for single press keys (a-z, A-Z) &, hotkeys' combinations such as 'cmd+k', 'ctrl+shft+a', etc\n\t\t(0, _hotkeysJs2.default)((0, _utils.parseFocusShortcuts)(focusShortcuts).join(','),\n\t\t/* eslint-disable no-shadow */\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tfunction (event, handler) {\n\t\t\t// Prevent the default refresh event under WINDOWS system\n\t\t\tevent.preventDefault();\n\t\t\tfocusSearchBox(event);\n\t\t});\n\n\t\t// if one of modifier keys are used, they are handled below\n\t\t(0, _hotkeysJs2.default)('*', function (event) {\n\t\t\tvar modifierKeys = (0, _utils.extractModifierKeysFromFocusShortcuts)(focusShortcuts);\n\n\t\t\tif (modifierKeys.length === 0) return;\n\n\t\t\tfor (var index = 0; index < modifierKeys.length; index += 1) {\n\t\t\t\tvar element = modifierKeys[index];\n\t\t\t\tif (_hotkeysJs2.default[element]) {\n\t\t\t\t\tfocusSearchBox(event);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tvar triggerClickAnalytics = function triggerClickAnalytics(searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar hitData = parsedSuggestions().find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData.source && hitData.source._id) {\n\t\t\t\tdocId = hitData.source._id;\n\t\t\t}\n\t\t}\n\t\tprops.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tvar shouldQuery = function shouldQuery(value, dataFields, props) {\n\t\tvar finalQuery = [];\n\t\tvar phrasePrefixFields = [];\n\t\tvar fields = dataFields.map(function (dataField) {\n\t\t\tvar queryField = '' + dataField.field + (dataField.weight ? '^' + dataField.weight : '');\n\t\t\tif (!(dataField.field.endsWith('.keyword') || dataField.field.endsWith('.autosuggest') || dataField.field.endsWith('.search'))) {\n\t\t\t\tphrasePrefixFields.push(queryField);\n\t\t\t}\n\t\t\treturn queryField;\n\t\t});\n\t\tif (props.searchOperators || props.queryString) {\n\t\t\treturn {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\tdefault_operator: props.queryFormat\n\t\t\t};\n\t\t}\n\n\t\tif (props.queryFormat === 'and') {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: fields,\n\t\t\t\t\ttype: 'cross_fields',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: fields,\n\t\t\t\t\ttype: 'phrase',\n\t\t\t\t\toperator: 'and'\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (phrasePrefixFields.length > 0) {\n\t\t\t\tfinalQuery.push({\n\t\t\t\t\tmulti_match: {\n\t\t\t\t\t\tquery: value,\n\t\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\t\toperator: 'and'\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn finalQuery;\n\t\t}\n\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'best_fields',\n\t\t\t\toperator: 'or',\n\t\t\t\tfuzziness: props.fuzziness ? props.fuzziness : 0\n\t\t\t}\n\t\t});\n\n\t\tfinalQuery.push({\n\t\t\tmulti_match: {\n\t\t\t\tquery: value,\n\t\t\t\tfields: fields,\n\t\t\t\ttype: 'phrase',\n\t\t\t\toperator: 'or'\n\t\t\t}\n\t\t});\n\n\t\tif (phrasePrefixFields.length > 0) {\n\t\t\tfinalQuery.push({\n\t\t\t\tmulti_match: {\n\t\t\t\t\tquery: value,\n\t\t\t\t\tfields: phrasePrefixFields,\n\t\t\t\t\ttype: 'phrase_prefix',\n\t\t\t\t\toperator: 'or'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn finalQuery;\n\t};\n\n\tvar searchBoxDefaultQuery = function searchBoxDefaultQuery(value, props) {\n\t\tvar finalQuery = null;\n\n\t\tvar fields = (0, _helper.normalizeDataField)(props.dataField, props.fieldWeights);\n\t\tif (value) {\n\t\t\tif (props.queryString) {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tquery_string: shouldQuery(value, fields, props)\n\t\t\t\t};\n\t\t\t} else if (props.searchOperators) {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tsimple_query_string: shouldQuery(value, fields, props)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tfinalQuery = {\n\t\t\t\t\tbool: {\n\t\t\t\t\t\tshould: shouldQuery(value, fields, props),\n\t\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (value === '') {\n\t\t\tfinalQuery = {\n\t\t\t\tbool: {\n\t\t\t\t\tshould: shouldQuery(value, fields, props),\n\t\t\t\t\tminimum_should_match: '1'\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tif (finalQuery && props.nestedField) {\n\t\t\tfinalQuery = {\n\t\t\t\tnested: {\n\t\t\t\t\tpath: props.nestedField,\n\t\t\t\t\tquery: finalQuery\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn finalQuery;\n\t};\n\n\t// fires query to fetch suggestion\n\tvar triggerDefaultQuery = function triggerDefaultQuery(paramValue) {\n\t\tif (!props.autosuggest) {\n\t\t\treturn;\n\t\t}\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tvar query = searchBoxDefaultQuery(value, props);\n\t\tif (defaultQuery) {\n\t\t\tvar defaultQueryTobeSet = defaultQuery(value, props) || {};\n\t\t\tif (defaultQueryTobeSet.query) {\n\t\t\t\tquery = defaultQueryTobeSet.query;\n\t\t\t}\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery({\n\t\t\tcomponentId: internalComponent,\n\t\t\tquery: query,\n\t\t\tvalue: value,\n\t\t\tcomponentType: _constants.componentTypes.searchBox\n\t\t});\n\t};\n\n\t// fires query to fetch results(dependent components are affected here)\n\tvar triggerCustomQuery = function triggerCustomQuery(paramValue) {\n\t\tvar categoryValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tvar value = typeof paramValue !== 'string' ? currentValue : paramValue;\n\t\tvar query = searchBoxDefaultQuery(value, props);\n\t\tif (customQuery) {\n\t\t\tvar customQueryTobeSet = customQuery(value, props) || {};\n\t\t\tvar queryTobeSet = customQueryTobeSet.query;\n\t\t\tif (queryTobeSet) {\n\t\t\t\tquery = queryTobeSet;\n\t\t\t}\n\t\t\t(0, _helper.updateCustomQuery)(componentId, props, value);\n\t\t}\n\t\tprops.updateQuery({\n\t\t\tcomponentId: componentId,\n\t\t\tvalue: value,\n\t\t\tquery: query,\n\t\t\tlabel: filterLabel,\n\t\t\tshowFilter: showFilter,\n\t\t\tURLParams: URLParams,\n\t\t\tcomponentType: _constants.componentTypes.searchBox,\n\t\t\tcategory: categoryValue\n\t\t});\n\t};\n\n\tvar triggerQuery = function triggerQuery() {\n\t\tvar _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t    _ref$isOpen = _ref.isOpen,\n\t\t    isOpen = _ref$isOpen === undefined ? undefined : _ref$isOpen,\n\t\t    _ref$customQuery = _ref.customQuery,\n\t\t    customQuery = _ref$customQuery === undefined ? false : _ref$customQuery,\n\t\t    _ref$defaultQuery = _ref.defaultQuery,\n\t\t    defaultQuery = _ref$defaultQuery === undefined ? false : _ref$defaultQuery,\n\t\t    _ref$value = _ref.value,\n\t\t    value = _ref$value === undefined ? undefined : _ref$value,\n\t\t    _ref$categoryValue = _ref.categoryValue,\n\t\t    categoryValue = _ref$categoryValue === undefined ? undefined : _ref$categoryValue;\n\n\t\tif (typeof isOpen === 'boolean') {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\n\t\tif (customQuery) {\n\t\t\ttriggerCustomQuery(value, categoryValue);\n\t\t}\n\t\tif (defaultQuery) {\n\t\t\ttriggerDefaultQuery(value);\n\t\t}\n\t};\n\n\tvar onValueSelected = function onValueSelected() {\n\t\tvar valueSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : currentValue;\n\t\tvar cause = arguments[1];\n\t\tvar suggestion = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\t\tvar onValueSelected = props.onValueSelected;\n\n\t\tif (onValueSelected) {\n\t\t\tonValueSelected(valueSelected, cause, suggestion);\n\t\t}\n\t};\n\tvar handleTextChange = (0, _helper.debounce)(function () {\n\t\tvar valueParam = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\t\tvar cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tif (cause === _causes2.default.CLEAR_VALUE) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (props.autosuggest) {\n\t\t\ttriggerDefaultQuery(valueParam);\n\t\t} else if (value === undefined && !onChange) {\n\t\t\ttriggerCustomQuery(valueParam);\n\t\t}\n\t}, props.debounce);\n\n\tvar setValue = function setValue(value) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar setValueProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : props;\n\t\tvar cause = arguments[3];\n\t\tvar hasMounted = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n\t\tvar toggleIsOpen = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : true;\n\t\tvar categoryValue = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : undefined;\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\tif (hasMounted) {\n\t\t\t\tif (toggleIsOpen) setIsOpen(!isOpen);\n\t\t\t\tsetCurrentValue(value);\n\t\t\t\tif (isDefaultValue) {\n\t\t\t\t\tif (props.autosuggest) {\n\t\t\t\t\t\ttriggerQuery(_extends({}, toggleIsOpen && { isOpen: !isOpen }, {\n\t\t\t\t\t\t\tdefaultQuery: true,\n\t\t\t\t\t\t\tvalue: value\n\t\t\t\t\t\t}));\n\t\t\t\t\t}\n\t\t\t\t\t// in case of strict selection only SUGGESTION_SELECT should be able\n\t\t\t\t\t// to set the query otherwise the value should reset\n\t\t\t\t\tif (setValueProps.strictSelection) {\n\t\t\t\t\t\tif (cause === _causes2.default.SUGGESTION_SELECT || value === '') {\n\t\t\t\t\t\t\ttriggerCustomQuery(value, categoryValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetValue('', true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttriggerCustomQuery(value, categoryValue);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// debounce for handling text while typing\n\t\t\t\t\thandleTextChange(value, cause);\n\t\t\t\t}\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t} else {\n\t\t\t\ttriggerQuery({\n\t\t\t\t\tdefaultQuery: props.autosuggest,\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: value,\n\t\t\t\t\tcategoryValue: categoryValue\n\t\t\t\t});\n\t\t\t\tif (setValueProps.onValueChange) setValueProps.onValueChange(value);\n\t\t\t}\n\t\t};\n\t\t(0, _helper.checkValueChange)(setValueProps.componentId, value, setValueProps.beforeValueChange, performUpdate);\n\t};\n\tvar withTriggerQuery = function withTriggerQuery(func) {\n\t\tif (func) {\n\t\t\treturn function (e) {\n\t\t\t\treturn func(e, function (_ref2) {\n\t\t\t\t\tvar isOpen = _ref2.isOpen;\n\t\t\t\t\treturn setValue(props.value, !isOpen, props);\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t};\n\tvar onSuggestionSelected = function onSuggestionSelected(suggestion) {\n\t\tsetIsOpen(false);\n\t\tvar suggestionValue = suggestion.value;\n\n\t\tif (value === undefined) {\n\t\t\tsetValue(suggestionValue, true, props, _causes2.default.SUGGESTION_SELECT, true, false, suggestion._category);\n\t\t} else if (onChange) {\n\t\t\tonChange(suggestionValue, function () {\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: suggestionValue,\n\t\t\t\t\tcategoryValue: suggestion._category\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t// Record analytics for selected suggestions\n\t\ttriggerClickAnalytics(suggestion._click_id);\n\t\t// onValueSelected is user interaction driven:\n\t\t// it should be triggered irrespective of controlled (or)\n\t\t// uncontrolled component behavior\n\t\tonValueSelected(suggestionValue, _causes2.default.SUGGESTION_SELECT, suggestion);\n\t};\n\n\tvar onInputChange = function onInputChange(e) {\n\t\tvar inputValue = e.target.value;\n\n\t\tif (!isOpen && props.autosuggest) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (value === undefined) {\n\t\t\tsetValue(inputValue, false, props, inputValue === '' ? _causes2.default.CLEAR_VALUE : undefined, true, false);\n\t\t} else if (onChange) {\n\t\t\t// handle caret position in controlled components\n\t\t\t(0, _utils.handleCaretPosition)(e);\n\t\t\tonChange(inputValue, function () {\n\t\t\t\tvar _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref3.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: inputValue,\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t}, e);\n\t\t}\n\t};\n\n\tvar handleKeyDown = function handleKeyDown(event, highlightedIndex) {\n\t\t// if a suggestion was selected, delegate the handling\n\t\t// to suggestion handler\n\t\tif (event.key === 'Enter' && highlightedIndex === null) {\n\t\t\tsetValue(event.target.value, true);\n\t\t\tonValueSelected(event.target.value, _causes2.default.ENTER_PRESS);\n\t\t}\n\t\tif (props.onKeyDown) {\n\t\t\tprops.onKeyDown(event, undefined.triggerQuery);\n\t\t}\n\t};\n\n\tvar clearValue = function clearValue() {\n\t\tsetValue('', false, props, _causes2.default.CLEAR_VALUE, true, false);\n\t\tif (onChange) {\n\t\t\tonChange('', function () {\n\t\t\t\tvar _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t    isOpen = _ref4.isOpen;\n\n\t\t\t\treturn triggerQuery({\n\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\tvalue: '',\n\t\t\t\t\tisOpen: isOpen\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t};\n\n\tvar shouldMicRender = function shouldMicRender(showVoiceSearch) {\n\t\t// checks for SSR\n\t\tif (typeof window === 'undefined') return false;\n\t\treturn showVoiceSearch && (window.webkitSpeechRecognition || window.SpeechRecognition);\n\t};\n\n\tvar handleStateChange = function handleStateChange(changes) {\n\t\tvar isOpen = changes.isOpen,\n\t\t    type = changes.type;\n\n\t\tif (type === _downshift2.default.stateChangeTypes.mouseUp && isOpen !== undefined) {\n\t\t\tsetIsOpen(isOpen);\n\t\t}\n\t};\n\n\tvar getBackgroundColor = function getBackgroundColor(highlightedIndex, index) {\n\t\tvar isDark = props.themePreset === 'dark';\n\t\tif (isDark) {\n\t\t\treturn highlightedIndex === index ? '#555' : '#424242';\n\t\t}\n\t\treturn highlightedIndex === index ? '#eee' : '#fff';\n\t};\n\n\tvar handleSearchIconClick = function handleSearchIconClick() {\n\t\tif (currentValue.trim()) {\n\t\t\tsetValue(currentValue, true);\n\t\t\tonValueSelected(currentValue, _causes2.default.SEARCH_ICON_CLICK);\n\t\t}\n\t};\n\n\tvar handleVoiceResults = function handleVoiceResults(_ref5) {\n\t\tvar results = _ref5.results;\n\n\t\tif (results && results[0] && results[0].isFinal && results[0][0] && results[0][0].transcript && results[0][0].transcript.trim()) {\n\t\t\tsetValue(results[0][0].transcript.trim(), true, props, undefined, true, isOpen);\n\t\t}\n\t};\n\n\tvar renderNoSuggestion = function renderNoSuggestion() {\n\t\tvar finalSuggestionsList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\t\tvar themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    renderNoSuggestion = props.renderNoSuggestion,\n\t\t    innerClass = props.innerClass,\n\t\t    error = props.error,\n\t\t    renderError = props.renderError;\n\n\t\tif (renderNoSuggestion && isOpen && !finalSuggestionsList.length && !isLoading && currentValue && !(renderError && error)) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tthemePreset: themePreset,\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tinnerClassName: 'noSuggestion'\n\t\t\t\t},\n\t\t\t\ttypeof renderNoSuggestion === 'function' ? renderNoSuggestion(currentValue) : renderNoSuggestion\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderLoader = function renderLoader() {\n\t\tvar loader = props.loader,\n\t\t    isLoading = props.isLoading,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (isLoading && loader && currentValue) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'loader',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\tloader\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderError = function renderError() {\n\t\tvar error = props.error,\n\t\t    renderError = props.renderError,\n\t\t    themePreset = props.themePreset,\n\t\t    theme = props.theme,\n\t\t    isLoading = props.isLoading,\n\t\t    innerClass = props.innerClass;\n\n\t\tif (error && renderError && currentValue && !isLoading) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_SuggestionWrapper2.default,\n\t\t\t\t{\n\t\t\t\t\tinnerClass: innerClass,\n\t\t\t\t\tinnerClassName: 'error',\n\t\t\t\t\ttheme: theme,\n\t\t\t\t\tthemePreset: themePreset\n\t\t\t\t},\n\t\t\t\t(0, _utils.isFunction)(renderError) ? renderError(error) : renderError\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar getComponent = function getComponent() {\n\t\tvar downshiftProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar error = props.error,\n\t\t    isLoading = props.isLoading,\n\t\t    rawData = props.rawData;\n\n\n\t\tvar data = {\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tdownshiftProps: downshiftProps,\n\t\t\tdata: props.suggestions,\n\t\t\tvalue: currentValue,\n\t\t\ttriggerClickAnalytics: triggerClickAnalytics,\n\t\t\tresultStats: stats(),\n\t\t\trawData: rawData\n\t\t};\n\t\treturn (0, _utils.getComponent)(data, props);\n\t};\n\tvar renderInputAddonBefore = function renderInputAddonBefore() {\n\t\tvar addonBefore = props.addonBefore;\n\n\t\tif (addonBefore) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\tnull,\n\t\t\t\taddonBefore\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\tvar renderInputAddonAfter = function renderInputAddonAfter() {\n\t\tvar addonAfter = props.addonAfter;\n\n\t\tif (addonAfter) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t_InputAddon2.default,\n\t\t\t\tnull,\n\t\t\t\taddonAfter\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar renderIcon = function renderIcon() {\n\t\tif (props.showIcon) {\n\t\t\treturn props.icon || (0, _core.jsx)(_SearchSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderCancelIcon = function renderCancelIcon() {\n\t\tif (props.showClear) {\n\t\t\treturn props.clearIcon || (0, _core.jsx)(_CancelSvg2.default, null);\n\t\t}\n\t\treturn null;\n\t};\n\n\tvar renderIcons = function renderIcons() {\n\t\tvar showIcon = props.showIcon,\n\t\t    showClear = props.showClear,\n\t\t    renderMic = props.renderMic,\n\t\t    getMicInstance = props.getMicInstance,\n\t\t    showVoiceSearch = props.showVoiceSearch,\n\t\t    iconPosition = props.iconPosition,\n\t\t    innerClass = props.innerClass;\n\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\tnull,\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'right', positionType: 'absolute' },\n\t\t\t\tcurrentValue && showClear && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: clearValue, showIcon: showIcon, isClearIcon: true },\n\t\t\t\t\trenderCancelIcon()\n\t\t\t\t),\n\t\t\t\tshouldMicRender(showVoiceSearch) && (0, _core.jsx)(_Mic2.default, {\n\t\t\t\t\tgetInstance: getMicInstance,\n\t\t\t\t\trender: renderMic,\n\t\t\t\t\tonResult: handleVoiceResults,\n\t\t\t\t\tclassName: (0, _helper.getClassName)(innerClass, 'mic') || null\n\t\t\t\t}),\n\t\t\t\ticonPosition === 'right' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_IconGroup2.default,\n\t\t\t\t{ groupPosition: 'left', positionType: 'absolute' },\n\t\t\t\ticonPosition === 'left' && (0, _core.jsx)(\n\t\t\t\t\t_IconWrapper2.default,\n\t\t\t\t\t{ onClick: handleSearchIconClick },\n\t\t\t\t\trenderIcon()\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\tvar handleFocus = function handleFocus(event) {\n\t\tif (props.autosuggest && !onChange) {\n\t\t\tsetIsOpen(true);\n\t\t}\n\t\tif (props.onFocus) {\n\t\t\tprops.onFocus(event, triggerQuery);\n\t\t}\n\t};\n\n\tvar onAutofillClick = function onAutofillClick(suggestion) {\n\t\tvar value = suggestion.value;\n\t\tsetIsOpen(true);\n\t\tsetCurrentValue(value);\n\t\ttriggerDefaultQuery(value);\n\t};\n\n\tvar hasMounted = (0, _react.useRef)();\n\tuseConstructor(function () {\n\t\tif (!props.enableAppbase) {\n\t\t\tthrow new Error('enableAppbase is required to be true when using SearchBox component.');\n\t\t}\n\t\tvar currentLocalValue = selectedValue || value || defaultValue || '';\n\n\t\thasMounted.current = false;\n\t\tif (currentLocalValue) {\n\t\t\tif (props.onChange) {\n\t\t\t\tprops.onChange(currentLocalValue, function () {\n\t\t\t\t\tvar _ref6 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t    isOpen = _ref6.isOpen;\n\n\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\tvalue: currentLocalValue,\n\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tsetCurrentValue(currentLocalValue);\n\n\t\t// Set custom and default queries in store\n\t\ttriggerCustomQuery(currentLocalValue, selectedCategory);\n\t\ttriggerDefaultQuery(currentLocalValue, selectedCategory);\n\t});\n\n\t(0, _react.useEffect)(function () {\n\t\tif (onData) {\n\t\t\tonData({\n\t\t\t\tdata: parsedSuggestions(),\n\t\t\t\trawData: rawData,\n\t\t\t\taggregationData: aggregationData,\n\t\t\t\tloading: isLoading,\n\t\t\t\terror: error\n\t\t\t});\n\t\t}\n\t}, [rawData, aggregationData, isLoading, error]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (hasMounted.current) {\n\t\t\tif (value !== undefined && currentValue !== value) {\n\t\t\t\tsetValue(value, !isOpen && props.autosuggest && !props.strictSelection, props, undefined, undefined, false);\n\t\t\t}\n\t\t}\n\t}, [value]);\n\n\t(0, _react.useEffect)(function () {\n\t\tif (\n\t\t// since, selectedValue will be updated when currentValue changes,\n\t\t// we must only check for the changes introduced by\n\t\t// clear action from SelectedFilters component in which case,\n\t\t// the currentValue will never match the updated selectedValue\n\t\t// currentValue !== props.defaultValue &&\n\t\thasMounted.current && currentValue !== selectedValue && !(typeof currentValue !== 'string' && !selectedValue)) {\n\t\t\tif (!selectedValue && currentValue) {\n\t\t\t\t// selected value is cleared, call onValueSelected\n\t\t\t\tonValueSelected('', _causes2.default.CLEAR_VALUE, null);\n\t\t\t}\n\t\t\tif (value === undefined) {\n\t\t\t\tsetValue(selectedValue || '', true, props, undefined, hasMounted.current, false);\n\t\t\t} else if (onChange) {\n\t\t\t\tif (value !== selectedValue && selectedValue !== currentValue) {\n\t\t\t\t\t// value prop exists\n\t\t\t\t\tonChange(selectedValue || '', function () {\n\t\t\t\t\t\tvar _ref7 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n\t\t\t\t\t\t    isOpen = _ref7.isOpen;\n\n\t\t\t\t\t\treturn triggerQuery({\n\t\t\t\t\t\t\tcustomQuery: true,\n\t\t\t\t\t\t\tvalue: selectedValue || '',\n\t\t\t\t\t\t\tisOpen: isOpen\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// value prop exists and onChange is not defined:\n\t\t\t\t// we need to put the current value back into the store\n\t\t\t\t// if the clear action was triggered by interacting with\n\t\t\t\t// selected-filters component\n\n\t\t\t\tsetValue(currentValue, true, props, undefined, true, false);\n\t\t\t}\n\t\t}\n\t}, [selectedValue]);\n\n\t(0, _react.useEffect)(function () {\n\t\thasMounted.current = true;\n\t\t// register hotkeys for listening to focusShortcuts' key presses\n\t\tlistenForFocusShortcuts();\n\t}, []);\n\n\tvar hasSuggestions = function hasSuggestions() {\n\t\treturn Array.isArray(parsedSuggestions()) && parsedSuggestions().length;\n\t};\n\treturn (0, _core.jsx)(\n\t\t_Container2.default,\n\t\t{ style: props.style, className: props.className },\n\t\tprops.title && (0, _core.jsx)(\n\t\t\t_Title2.default,\n\t\t\t{ className: (0, _helper.getClassName)(props.innerClass, 'title') || null },\n\t\t\tprops.title\n\t\t),\n\t\tprops.autosuggest ? (0, _core.jsx)(_downshift2.default, _extends({\n\t\t\tid: props.componentId + '-downshift',\n\t\t\tonChange: onSuggestionSelected,\n\t\t\tonStateChange: handleStateChange,\n\t\t\tisOpen: isOpen,\n\t\t\titemToString: function itemToString(i) {\n\t\t\t\treturn i;\n\t\t\t},\n\t\t\trender: function render(_ref8) {\n\t\t\t\tvar getRootProps = _ref8.getRootProps,\n\t\t\t\t    getInputProps = _ref8.getInputProps,\n\t\t\t\t    getItemProps = _ref8.getItemProps,\n\t\t\t\t    isOpen = _ref8.isOpen,\n\t\t\t\t    highlightedIndex = _ref8.highlightedIndex,\n\t\t\t\t    setHighlightedIndex = _ref8.setHighlightedIndex,\n\t\t\t\t    rest = _objectWithoutProperties(_ref8, ['getRootProps', 'getInputProps', 'getItemProps', 'isOpen', 'highlightedIndex', 'setHighlightedIndex']);\n\n\t\t\t\tvar renderSuggestionsDropdown = function renderSuggestionsDropdown() {\n\t\t\t\t\tvar getIcon = function getIcon(iconType) {\n\t\t\t\t\t\tswitch (iconType) {\n\t\t\t\t\t\t\tcase _utils.suggestionTypes.Recent:\n\t\t\t\t\t\t\t\treturn props.recentSearchesIcon;\n\t\t\t\t\t\t\tcase _utils.suggestionTypes.Popular:\n\t\t\t\t\t\t\t\treturn props.popularSearchesIcon;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t(0, _utils.hasCustomRenderer)(props) && getComponent(_extends({\n\t\t\t\t\t\t\tgetInputProps: getInputProps,\n\t\t\t\t\t\t\tgetItemProps: getItemProps,\n\t\t\t\t\t\t\tisOpen: isOpen,\n\t\t\t\t\t\t\thighlightedIndex: highlightedIndex,\n\t\t\t\t\t\t\tsetHighlightedIndex: setHighlightedIndex\n\t\t\t\t\t\t}, rest)),\n\t\t\t\t\t\tisOpen && renderLoader(),\n\t\t\t\t\t\tisOpen && renderError(),\n\t\t\t\t\t\t!(0, _utils.hasCustomRenderer)(props) && isOpen && hasSuggestions() ? (0, _core.jsx)(\n\t\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcss: (0, _Input.suggestions)(props.themePreset, props.theme),\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'list')\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tparsedSuggestions().map(function (item, index) {\n\t\t\t\t\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t'li',\n\t\t\t\t\t\t\t\t\t_extends({}, getItemProps({ item: item }), {\n\t\t\t\t\t\t\t\t\t\tkey: index + 1 + '-' + item.value,\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: getBackgroundColor(highlightedIndex, index),\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'flex-start',\n\t\t\t\t\t\t\t\t\t\t\talignItems: 'center'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tprops.renderItem ? props.renderItem(item) : (0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t_react2.default.Fragment,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '0 10px 0 0',\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_CustomSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\t\ticonId: index + 1 + '-' + item.value + '-icon',\n\t\t\t\t\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, item._suggestion_type + '-search-icon') || null,\n\t\t\t\t\t\t\t\t\t\t\t\ticon: getIcon(item._suggestion_type),\n\t\t\t\t\t\t\t\t\t\t\t\ttype: item._suggestion_type + '-search-icon'\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t(0, _core.jsx)(_SuggestionItem2.default, {\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: currentValue || '',\n\t\t\t\t\t\t\t\t\t\t\tsuggestion: item\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\titem._category ? null : (0, _core.jsx)(_AutofillSvg2.default, {\n\t\t\t\t\t\t\t\t\t\t\tonClick: function onClick(e) {\n\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\t\t\tonAutofillClick(item);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t) : renderNoSuggestion(parsedSuggestions())\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t'div',\n\t\t\t\t\tgetRootProps({ css: _Input.suggestionsContainer }, { suppressRefError: true }),\n\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t_InputGroup2.default,\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t(0, _core.jsx)(_Input2.default, _extends({\n\t\t\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\t\t\tid: props.componentId + '-input',\n\t\t\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\t\t\tref: _inputRef\n\t\t\t\t\t\t\t}, getInputProps({\n\t\t\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input'),\n\t\t\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\t\t\tvalue: currentValue === null ? '' : currentValue,\n\t\t\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\t\t\tonFocus: handleFocus,\n\t\t\t\t\t\t\t\tonClick: function onClick() {\n\t\t\t\t\t\t\t\t\t// clear highlighted index\n\t\t\t\t\t\t\t\t\tsetHighlightedIndex(null);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\t\t\tonKeyDown: function onKeyDown(e) {\n\t\t\t\t\t\t\t\t\treturn handleKeyDown(e, highlightedIndex);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\t\t\tautoFocus: props.autoFocus\n\t\t\t\t\t\t\t}), {\n\t\t\t\t\t\t\t\tthemePreset: props.themePreset,\n\t\t\t\t\t\t\t\ttype: props.type\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\trenderIcons(),\n\t\t\t\t\t\t\t!props.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderInputAddonAfter()\n\t\t\t\t\t),\n\t\t\t\t\tprops.expandSuggestionsContainer && renderSuggestionsDropdown.apply(undefined, [getRootProps, getInputProps, getItemProps, isOpen, highlightedIndex, setHighlightedIndex].concat(rest))\n\t\t\t\t);\n\t\t\t}\n\t\t}, props.downShiftProps)) : (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ css: _Input.suggestionsContainer },\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_InputGroup2.default,\n\t\t\t\tnull,\n\t\t\t\trenderInputAddonBefore(),\n\t\t\t\t(0, _core.jsx)(\n\t\t\t\t\t_InputWrapper2.default,\n\t\t\t\t\tnull,\n\t\t\t\t\t(0, _core.jsx)(_Input2.default, {\n\t\t\t\t\t\t'aria-label': props.componentId,\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(props.innerClass, 'input') || null,\n\t\t\t\t\t\tplaceholder: props.placeholder,\n\t\t\t\t\t\tvalue: currentValue || '',\n\t\t\t\t\t\tonChange: onInputChange,\n\t\t\t\t\t\tonBlur: withTriggerQuery(props.onBlur),\n\t\t\t\t\t\tonFocus: withTriggerQuery(props.onFocus),\n\t\t\t\t\t\tonKeyPress: withTriggerQuery(props.onKeyPress),\n\t\t\t\t\t\tonKeyDown: withTriggerQuery(props.onKeyDown),\n\t\t\t\t\t\tonKeyUp: withTriggerQuery(props.onKeyUp),\n\t\t\t\t\t\tautoFocus: props.autoFocus,\n\t\t\t\t\t\ticonPosition: props.iconPosition,\n\t\t\t\t\t\tshowIcon: props.showIcon,\n\t\t\t\t\t\tshowClear: props.showClear,\n\t\t\t\t\t\tthemePreset: props.themePreset\n\t\t\t\t\t}),\n\t\t\t\t\trenderIcons()\n\t\t\t\t),\n\t\t\t\trenderInputAddonAfter()\n\t\t\t)\n\t\t)\n\t);\n};\nSearchBox.propTypes = {\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\tselectedCategory: _types2.default.string,\n\tsuggestions: _types2.default.suggestions,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\terror: _types2.default.title,\n\tisLoading: _types2.default.bool,\n\ttime: _types2.default.number,\n\tenableAppbase: _types2.default.bool,\n\trawData: _types2.default.rawData,\n\taggregationData: _types2.default.aggregationData,\n\t// component props\n\tautoFocus: _types2.default.bool,\n\tautosuggest: _types2.default.bool,\n\tenableSynonyms: _types2.default.bool,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\tindex: _types2.default.string,\n\tenablePopularSuggestions: _types2.default.bool,\n\tenableRecentSuggestions: _types2.default.bool,\n\tqueryString: _types2.default.bool,\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tclearIcon: _types2.default.children,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomHighlight: _types2.default.func,\n\tcustomQuery: _types2.default.func,\n\tdefaultQuery: _types2.default.func,\n\tdataField: _types2.default.dataFieldValidator,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\tsize: _types2.default.number,\n\tdebounce: _types2.default.number,\n\tdefaultValue: _types2.default.string,\n\tvalue: _types2.default.string,\n\tdefaultSuggestions: _types2.default.suggestions,\n\tcustomData: _types2.default.title,\n\tdownShiftProps: _types2.default.props,\n\tchildren: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tfieldWeights: _types2.default.fieldWeights,\n\tfilterLabel: _types2.default.string,\n\tfuzziness: _types2.default.fuzziness,\n\thighlight: _types2.default.bool,\n\thighlightField: _types2.default.stringOrArray,\n\ticon: _types2.default.children,\n\ticonPosition: _types2.default.iconPosition,\n\tinnerClass: _types2.default.style,\n\tincludeFields: _types2.default.includeFields,\n\tloader: _types2.default.title,\n\tnestedField: _types2.default.string,\n\tonError: _types2.default.func,\n\tonBlur: _types2.default.func,\n\tonFocus: _types2.default.func,\n\tonKeyDown: _types2.default.func,\n\tonKeyPress: _types2.default.func,\n\tonKeyUp: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tonChange: _types2.default.func,\n\tonValueSelected: _types2.default.func,\n\tplaceholder: _types2.default.string,\n\tqueryFormat: _types2.default.queryFormatSearch,\n\treact: _types2.default.react,\n\trender: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderNoSuggestion: _types2.default.title,\n\tshowClear: _types2.default.bool,\n\tshowDistinctSuggestions: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tshowIcon: _types2.default.bool,\n\tshowVoiceSearch: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\ttheme: _types2.default.style,\n\tthemePreset: _types2.default.themePreset,\n\ttype: _types2.default.string,\n\tURLParams: _types2.default.bool,\n\tstrictSelection: _types2.default.bool,\n\tsearchOperators: _types2.default.bool,\n\tenablePredictiveSuggestions: _types2.default.bool,\n\trecentSearchesIcon: _types2.default.componentObject,\n\tpopularSearchesIcon: _types2.default.componentObject,\n\t// Mic props\n\tgetMicInstance: _types2.default.func,\n\trenderMic: _types2.default.func,\n\t//\n\tfocusShortcuts: _types2.default.focusShortcuts,\n\taddonBefore: _types2.default.children,\n\taddonAfter: _types2.default.children,\n\texpandSuggestionsContainer: _types2.default.bool,\n\tpopularSuggestionsConfig: _types2.default.componentObject,\n\trecentSuggestionsConfig: _types2.default.componentObject,\n\tapplyStopwords: _types2.default.bool,\n\tcustomStopwords: _types2.default.stringArray,\n\tonData: _types2.default.func,\n\trenderItem: _types2.default.func,\n\tisOpen: _types2.default.bool\n};\n\nSearchBox.defaultProps = {\n\tautosuggest: true,\n\tclassName: null,\n\tdebounce: 0,\n\tdownShiftProps: {},\n\tenableSynonyms: true,\n\tenablePopularSuggestions: false,\n\texcludeFields: [],\n\ticonPosition: 'left',\n\tincludeFields: ['*'],\n\tplaceholder: 'Search',\n\tqueryFormat: 'or',\n\tshowFilter: true,\n\tshowIcon: true,\n\tshowVoiceSearch: false,\n\tstyle: {},\n\tURLParams: false,\n\tshowClear: false,\n\tshowDistinctSuggestions: true,\n\tstrictSelection: false,\n\tsearchOperators: false,\n\tsize: 10,\n\ttime: 0,\n\tfocusShortcuts: ['/'],\n\taddonBefore: undefined,\n\taddonAfter: undefined,\n\texpandSuggestionsContainer: true,\n\tsuggestions: [],\n\tisOpen: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null,\n\t\tselectedCategory: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].category || null,\n\t\tsuggestions: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tthemePreset: state.config.themePreset,\n\t\tisLoading: !!state.isLoading[props.componentId + '_active'],\n\t\terror: state.error[props.componentId],\n\t\tenableAppbase: state.config.enableAppbase,\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, documentId) {\n\t\t\treturn dispatch((0, _actions.recordSuggestionClick)(searchPosition, documentId));\n\t\t},\n\t\tsetCustomQuery: function setCustomQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setCustomQuery)(component, query));\n\t\t},\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({}, props, { internalComponent: true, componentType: _constants.componentTypes.searchBox }),\n\t\tfunction () {\n\t\t\treturn (0, _core.jsx)(SearchBox, _extends({ ref: props.myForwardedRef }, props));\n\t\t}\n\t);\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, SearchBox);\n\nForwardRefComponent.displayName = 'SearchBox';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}