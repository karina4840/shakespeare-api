{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getCalendarIntervalErrorMessage = exports.queryFormatMillisecondsMap = exports.suggestionTypes = exports.getTopSuggestions = exports.withClickIds = exports.getCompositeAggsQuery = exports.getAggsQuery = exports.extractQueryFromDefaultQuery = exports.updateInternalQuery = exports.getSearchState = exports.getOptionsFromQuery = exports.parseHits = exports.handleA11yAction = exports.getInnerKey = exports.getClassName = exports.checkSomePropChange = exports.checkPropChange = exports.updateDefaultQuery = exports.updateCustomQuery = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.isEqual = isEqual;\nexports.debounce = debounce;\nexports.getQueryOptions = getQueryOptions;\nexports.buildQuery = buildQuery;\nexports.pushToAndClause = pushToAndClause;\nexports.checkValueChange = checkValueChange;\nexports.getAggsOrder = getAggsOrder;\nexports.formatDate = formatDate;\nexports.getResultStats = getResultStats;\nexports.extractFieldsFromSource = extractFieldsFromSource;\nexports.normalizeDataField = normalizeDataField;\nexports.handleOnSuggestions = handleOnSuggestions;\nexports.isValidDateRangeQueryFormat = isValidDateRangeQueryFormat;\n\nvar _dateFormats = require('./dateFormats');\n\nvar _dateFormats2 = _interopRequireDefault(_dateFormats);\n\nvar _suggestions = require('./suggestions');\n\nvar _suggestions2 = _interopRequireDefault(_suggestions);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar updateCustomQuery = exports.updateCustomQuery = function updateCustomQuery(componentId, props, value) {\n  if (props.customQuery && typeof props.customQuery === 'function') {\n    props.setCustomQuery(componentId, props.customQuery(value, props));\n  }\n};\n\nvar updateDefaultQuery = exports.updateDefaultQuery = function updateDefaultQuery(componentId, props, value) {\n  if (props.defaultQuery && typeof props.defaultQuery === 'function') {\n    props.setDefaultQuery(componentId, props.defaultQuery(value, props));\n  }\n};\n\nfunction isEqual(x, y) {\n  if (x === y) return true;\n  if (!(x instanceof Object) || !(y instanceof Object)) return false;\n  if (x.constructor !== y.constructor) return false;\n\n  for (var p in x) {\n    if (!x.hasOwnProperty(p)) continue;\n    if (!y.hasOwnProperty(p)) return false;\n    if (x[p] === y[p]) continue;\n    if (typeof x[p] !== 'object') return false;\n    if (!isEqual(x[p], y[p])) return false;\n  }\n\n  for (var _p in y) {\n    if (y.hasOwnProperty(_p) && !x.hasOwnProperty(_p)) return false;\n  }\n\n  return true;\n}\n\nfunction debounce(callback, wait) {\n  var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n  var timeout = null;\n  var callbackArgs = null;\n\n  var later = function later() {\n    return callback.apply(context, callbackArgs);\n  };\n\n  return function debouncedFunction() {\n    callbackArgs = arguments;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\nfunction getQueryOptions(props) {\n  var options = {};\n\n  if (props.size !== undefined) {\n    options.size = props.size;\n  }\n\n  if (props.includeFields || props.excludeFields) {\n    var source = {};\n\n    if (props.includeFields) {\n      source.includes = props.includeFields;\n    }\n\n    if (props.excludeFields) {\n      source.excludes = props.excludeFields;\n    }\n\n    options._source = source;\n  }\n\n  return options;\n}\n\nfunction getOperation(conjunction) {\n  if (conjunction === 'and') {\n    return 'must';\n  }\n\n  if (conjunction === 'or') {\n    return 'should';\n  }\n\n  return 'must_not';\n}\n\nfunction createBoolQuery(operation, query) {\n  var resultQuery = null;\n\n  if (Array.isArray(query) && query.length || !Array.isArray(query) && query) {\n    resultQuery = {\n      bool: _defineProperty({}, operation, query)\n    };\n  }\n\n  if (operation === 'should' && resultQuery) {\n    resultQuery = {\n      bool: _extends({}, resultQuery.bool, {\n        minimum_should_match: 1\n      })\n    };\n  }\n\n  return resultQuery;\n}\n\nfunction getQuery(react, queryList) {\n  var query = [];\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      var operation = getOperation(conjunction);\n      var queryArr = react[conjunction].map(function (comp) {\n        if (typeof comp !== 'string') {\n          return getQuery(comp, queryList);\n        } else if (comp in queryList) {\n          return queryList[comp];\n        }\n\n        return null;\n      }).filter(function (item) {\n        return !!item;\n      });\n      var boolQuery = createBoolQuery(operation, queryArr);\n\n      if (boolQuery) {\n        query = [].concat(_toConsumableArray(query), [boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'string') {\n      var _operation = getOperation(conjunction);\n\n      var _boolQuery = createBoolQuery(_operation, queryList[react[conjunction]]);\n\n      if (_boolQuery) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null) {\n      var _boolQuery2 = getQuery(react[conjunction], queryList);\n\n      if (_boolQuery2) {\n        query = [].concat(_toConsumableArray(query), [_boolQuery2]);\n      }\n    }\n  });\n\n  if (Array.isArray(query) && query.length) {\n    return {\n      bool: {\n        must: query\n      }\n    };\n  }\n\n  if (query && Object.keys(query).length) {\n    return query;\n  }\n\n  return null;\n}\n\nfunction getExternalQueryOptions(react, options, component) {\n  var queryOptions = {};\n  Object.keys(react).forEach(function (conjunction) {\n    if (Array.isArray(react[conjunction])) {\n      react[conjunction].forEach(function (comp) {\n        if (options[comp]) {\n          queryOptions = _extends({}, queryOptions, options[comp]);\n        }\n      });\n    } else if (typeof react[conjunction] === 'string') {\n      if (options[react[conjunction]]) {\n        queryOptions = _extends({}, queryOptions, options[react[conjunction]]);\n      }\n    } else if (typeof react[conjunction] === 'object' && react[conjunction] !== null && !Array.isArray(react[conjunction])) {\n      queryOptions = _extends({}, queryOptions, getExternalQueryOptions(react[conjunction], options));\n    }\n  });\n\n  if (options[component]) {\n    queryOptions = _extends({}, queryOptions, options[component]);\n  }\n\n  return queryOptions;\n}\n\nfunction buildQuery(component, dependencyTree, queryList, queryOptions) {\n  var queryObj = null;\n  var options = null;\n\n  if (component in dependencyTree) {\n    queryObj = getQuery(dependencyTree[component], queryList);\n    options = getExternalQueryOptions(dependencyTree[component], queryOptions, component);\n  }\n\n  return {\n    queryObj: queryObj,\n    options: options\n  };\n}\n\nfunction pushToAndClause(reactProp, component) {\n  var react = _extends({}, reactProp);\n\n  if (react.and) {\n    if (Array.isArray(react.and)) {\n      react.and = [].concat(_toConsumableArray(react.and), [component]);\n      return react;\n    } else if (typeof react.and === 'string') {\n      react.and = [react.and, component];\n      return react;\n    }\n\n    react.and = pushToAndClause(react.and, component);\n    return react;\n  }\n\n  return _extends({}, react, {\n    and: component\n  });\n}\n\nfunction checkValueChange(componentId, value, beforeValueChange, performUpdate) {\n  var selectedValue = value;\n\n  if (Array.isArray(value) && !value.length) {\n    selectedValue = null;\n  }\n\n  var handleError = function handleError(e) {\n    console.warn(componentId + ' - beforeValueChange rejected the promise with ', e);\n  };\n\n  if (beforeValueChange) {\n    try {\n      var promise = beforeValueChange(selectedValue);\n\n      if (promise instanceof Promise) {\n        promise.then(performUpdate).catch(handleError);\n      } else {\n        performUpdate();\n      }\n    } catch (e) {\n      handleError(e);\n    }\n  } else {\n    performUpdate();\n  }\n}\n\nfunction getAggsOrder(sortBy) {\n  if (sortBy === 'count') {\n    return {\n      _count: 'desc'\n    };\n  }\n\n  return {\n    _term: sortBy\n  };\n}\n\nvar checkPropChange = exports.checkPropChange = function checkPropChange(prevProp, nextProp, callback) {\n  if (!isEqual(prevProp, nextProp)) {\n    callback();\n    return true;\n  }\n\n  return false;\n};\n\nvar checkSomePropChange = exports.checkSomePropChange = function checkSomePropChange() {\n  var prevProps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var nextProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var propsList = arguments[2];\n  var callback = arguments[3];\n  propsList.some(function (prop) {\n    return checkPropChange(prevProps[prop], nextProps[prop], callback);\n  });\n};\n\nvar getClassName = exports.getClassName = function getClassName(classMap, component) {\n  return classMap && classMap[component] || '';\n};\n\nvar getInnerKey = exports.getInnerKey = function getInnerKey(obj, key) {\n  return obj && obj[key] || {};\n};\n\nvar handleA11yAction = exports.handleA11yAction = function handleA11yAction(e, callback) {\n  if (e.key === 'Enter' || e.key === ' ') {\n    e.preventDefault();\n    callback();\n  }\n};\n\nvar highlightResults = function highlightResults(result) {\n  var data = _extends({}, result);\n\n  if (data.highlight) {\n    Object.keys(data.highlight).forEach(function (highlightItem) {\n      var highlightValue = data.highlight[highlightItem][0];\n      data._source = _extends({}, data._source, _defineProperty({}, highlightItem, highlightValue));\n    });\n  }\n\n  return data;\n};\n\nvar parseHits = exports.parseHits = function parseHits(hits) {\n  var showHighlighted = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  var results = null;\n\n  if (hits) {\n    results = [].concat(_toConsumableArray(hits)).map(function (item) {\n      var data = _extends({}, item);\n\n      if (showHighlighted) data = highlightResults(item);\n      var result = Object.keys(data).filter(function (key) {\n        return key !== '_source';\n      }).reduce(function (obj, key) {\n        obj[key] = data[key];\n        return obj;\n      }, _extends({\n        highlight: data.highlight || {}\n      }, data._source));\n      return result;\n    });\n  }\n\n  return results;\n};\n\nfunction formatDate(date, props) {\n  if (props.parseDate) {\n    return props.parseDate(date, props);\n  }\n\n  switch (props.queryFormat) {\n    case 'epoch_millis':\n      return date.getTime();\n\n    case 'epoch_second':\n      return Math.floor(date.getTime() / 1000);\n\n    default:\n      {\n        if (_dateFormats2.default[props.queryFormat]) {\n          return date.toString(_dateFormats2.default[props.queryFormat]);\n        }\n\n        return date.getTime();\n      }\n  }\n}\n\nvar getOptionsFromQuery = function getOptionsFromQuery() {\n  var customQuery = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  if (customQuery) {\n    var query = customQuery.query,\n        rest = _objectWithoutProperties(customQuery, ['query']);\n\n    return Object.keys(rest).length ? rest : null;\n  }\n\n  return null;\n};\n\nexports.getOptionsFromQuery = getOptionsFromQuery;\n\nfunction computeResultStats(hits, searchState, promotedResults) {\n  Object.keys(hits).forEach(function (componentId) {\n    var _ref = hits[componentId] || {},\n        hidden = _ref.hidden,\n        total = _ref.total,\n        time = _ref.time;\n\n    searchState[componentId] = _extends({}, searchState[componentId], {\n      resultStats: _extends({}, searchState[componentId].resultStats, {\n        numberOfResults: total,\n        time: time,\n        promoted: promotedResults[componentId] && promotedResults[componentId].length,\n        hidden: hidden || 0\n      })\n    });\n  });\n}\n\nvar getSearchState = exports.getSearchState = function getSearchState() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var forHeaders = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var selectedValues = state.selectedValues,\n      queryLog = state.queryLog,\n      dependencyTree = state.dependencyTree,\n      props = state.props,\n      hits = state.hits,\n      aggregations = state.aggregations,\n      isLoading = state.isLoading,\n      error = state.error,\n      promotedResults = state.promotedResults,\n      settings = state.settings,\n      customData = state.customData,\n      rawData = state.rawData;\n  var searchState = {};\n\n  var populateState = function populateState() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var key = arguments[1];\n    return Object.keys(obj).forEach(function (componentId) {\n      searchState[componentId] = _extends({}, searchState[componentId], key ? _defineProperty({}, key, obj[componentId]) : obj[componentId]);\n    });\n  };\n\n  populateState(props);\n  Object.keys(selectedValues).forEach(function (componentId) {\n    var componentState = searchState[componentId];\n    var selectedValue = selectedValues[componentId];\n\n    if (selectedValue) {\n      searchState[componentId] = _extends({}, componentState, _extends({\n        title: selectedValue.label,\n        componentType: selectedValue.componentType,\n        value: selectedValue.value\n      }, selectedValue.category && {\n        category: selectedValue.category\n      }, {\n        URLParams: selectedValue.URLParams\n      }));\n    }\n  });\n\n  if (!forHeaders) {\n    populateState(queryLog);\n    populateState(hits, 'hits');\n    populateState(aggregations, 'aggregations');\n    populateState(isLoading, 'isLoading');\n    populateState(error, 'error');\n    populateState(promotedResults, 'promotedData');\n    populateState(settings, 'settings');\n    populateState(customData, 'customData');\n    populateState(rawData, 'rawData');\n    computeResultStats(hits, searchState, promotedResults);\n  }\n\n  populateState(dependencyTree, 'react');\n  return searchState;\n};\n\nvar updateInternalQuery = exports.updateInternalQuery = function updateInternalQuery(componentId, queryOptions, value, props, defaultQueryToExecute, queryParams) {\n  var defaultQuery = props.defaultQuery;\n  var defaultQueryOptions = void 0;\n  var query = void 0;\n\n  if (defaultQuery) {\n    var queryTobeSet = defaultQuery(value, props);\n\n    var _ref3 = queryTobeSet || {};\n\n    query = _ref3.query;\n    defaultQueryOptions = getOptionsFromQuery(queryTobeSet);\n    updateDefaultQuery(componentId, props, value);\n  }\n\n  props.setQueryOptions(componentId, _extends({}, defaultQueryOptions, queryOptions || defaultQueryToExecute));\n\n  if (query) {\n    props.updateQuery(_extends({\n      componentId: componentId,\n      query: query,\n      value: value\n    }, queryParams));\n  }\n};\n\nvar extractQueryFromDefaultQuery = function extractQueryFromDefaultQuery(props, value) {\n  var queryToBeReturned = {};\n  var defaultQuery = props.defaultQuery;\n\n  if (defaultQuery) {\n    var evaluateQuery = defaultQuery(value, props);\n\n    if (evaluateQuery) {\n      var query = evaluateQuery.query,\n          options = _objectWithoutProperties(evaluateQuery, ['query']);\n\n      if (options) {\n        queryToBeReturned = options;\n      }\n    }\n  }\n\n  return queryToBeReturned;\n};\n\nexports.extractQueryFromDefaultQuery = extractQueryFromDefaultQuery;\n\nvar getAggsQuery = exports.getAggsQuery = function getAggsQuery(value, query, props) {\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      missingLabel = props.missingLabel;\n  clonedQuery.size = 0;\n  clonedQuery.aggs = _defineProperty({}, dataField, {\n    terms: _extends({\n      field: dataField,\n      size: size,\n      order: getAggsOrder(sortBy || 'count')\n    }, showMissing ? {\n      missing: missingLabel\n    } : {})\n  });\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar getCompositeAggsQuery = exports.getCompositeAggsQuery = function getCompositeAggsQuery() {\n  var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref4$query = _ref4.query,\n      query = _ref4$query === undefined ? {} : _ref4$query,\n      props = _ref4.props,\n      _ref4$after = _ref4.after,\n      after = _ref4$after === undefined ? null : _ref4$after,\n      _ref4$showTopHits = _ref4.showTopHits,\n      showTopHits = _ref4$showTopHits === undefined ? false : _ref4$showTopHits,\n      value = _ref4.value;\n\n  var clonedQuery = query;\n  var dataField = props.dataField,\n      size = props.size,\n      sortBy = props.sortBy,\n      showMissing = props.showMissing,\n      aggregationField = props.aggregationField;\n  var finalField = aggregationField || dataField;\n  var order = sortBy === 'count' ? {} : {\n    order: sortBy\n  };\n  clonedQuery.aggs = _defineProperty({}, finalField, _extends({\n    composite: _extends({\n      sources: [_defineProperty({}, finalField, {\n        terms: _extends({\n          field: finalField\n        }, order, showMissing ? {\n          missing_bucket: true\n        } : {})\n      })],\n      size: size\n    }, after)\n  }, showTopHits ? {\n    aggs: _defineProperty({}, finalField, {\n      top_hits: {\n        size: 1\n      }\n    })\n  } : {}));\n  clonedQuery.size = 0;\n\n  if (props.nestedField) {\n    clonedQuery.aggs = {\n      reactivesearch_nested: {\n        nested: {\n          path: props.nestedField\n        },\n        aggs: clonedQuery.aggs\n      }\n    };\n  }\n\n  return _extends({}, clonedQuery, extractQueryFromDefaultQuery(props, value));\n};\n\nvar withClickIds = exports.withClickIds = function withClickIds() {\n  var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return results.map(function (result, index) {\n    return _extends({}, result, {\n      _click_id: index\n    });\n  });\n};\n\nfunction getResultStats(props) {\n  var total = props.total,\n      size = props.size,\n      time = props.time,\n      hidden = props.hidden,\n      promotedResults = props.promotedResults;\n  return _extends({\n    numberOfResults: total\n  }, size > 0 ? {\n    numberOfPages: Math.ceil(total / size)\n  } : null, {\n    time: time || 0,\n    hidden: hidden,\n    promoted: promotedResults && promotedResults.length\n  });\n}\n\nfunction extractFieldsFromSource(esSource) {\n  function getFields() {\n    var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    return Object.keys(source).reduce(function () {\n      var acc = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var k = arguments[1];\n      var key = prefix ? prefix + '.' + k : k;\n\n      if (!Number.isNaN(parseInt(k, 10))) {\n        key = prefix || k;\n      }\n\n      if (source[k] && typeof source[k] === 'object') {\n        return _extends({}, acc, getFields(source[k], key));\n      }\n\n      return _extends({}, acc, _defineProperty({}, key, true));\n    }, []);\n  }\n\n  var fields = getFields(esSource);\n  return Object.keys(fields);\n}\n\nfunction normalizeDataField(dataField) {\n  var fieldWeights = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  if (typeof dataField === 'string') {\n    return [{\n      field: dataField,\n      weight: fieldWeights.length ? fieldWeights[0] : undefined\n    }];\n  }\n\n  if (Array.isArray(dataField)) {\n    return dataField.map(function (field, index) {\n      var normalizedField = {};\n\n      if (typeof field === 'string') {\n        normalizedField.field = field;\n\n        if (fieldWeights.length > index) {\n          normalizedField.weight = fieldWeights[index];\n        }\n      } else if (typeof field === 'object' && field && field.field) {\n        normalizedField.field = field.field;\n        normalizedField.weight = field.weight;\n      }\n\n      return normalizedField;\n    });\n  }\n\n  if (typeof dataField === 'object' && dataField) {\n    return [{\n      field: dataField.field,\n      weight: dataField.weight\n    }];\n  }\n\n  return [];\n}\n\nfunction handleOnSuggestions(results, currentValue, props) {\n  var parseSuggestion = props.parseSuggestion,\n      promotedResults = props.promotedResults,\n      enablePredictiveSuggestions = props.enablePredictiveSuggestions;\n  var fields = [];\n\n  if (props.dataField) {\n    fields = normalizeDataField(props.dataField).map(function (f) {\n      return f.field;\n    });\n  } else if (results && Array.isArray(results) && results.length > 0 && results[0] && results[0]._source) {\n    fields = extractFieldsFromSource(results[0]._source);\n  }\n\n  var newResults = parseHits(results, false);\n  var parsedPromotedResults = parseHits(promotedResults, false);\n\n  if (parsedPromotedResults && parsedPromotedResults.length) {\n    var ids = parsedPromotedResults.map(function (item) {\n      return item._id;\n    }).filter(Boolean);\n\n    if (ids) {\n      newResults = newResults.filter(function (item) {\n        return !ids.includes(item._id);\n      });\n    }\n\n    newResults = [].concat(_toConsumableArray(parsedPromotedResults), _toConsumableArray(newResults));\n  }\n\n  var parsedSuggestions = (0, _suggestions2.default)({\n    fields: fields,\n    suggestions: newResults,\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: props.showDistinctSuggestions,\n    enablePredictiveSuggestions: enablePredictiveSuggestions,\n    enableSynonyms: props.enableSynonyms\n  });\n\n  if (parseSuggestion) {\n    return parsedSuggestions.map(function (suggestion) {\n      return parseSuggestion(suggestion);\n    });\n  }\n\n  return parsedSuggestions;\n}\n\nvar getTopSuggestions = exports.getTopSuggestions = function getTopSuggestions(querySuggestions) {\n  var currentValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var showDistinctSuggestions = arguments[2];\n  var parsedSuggestions = parseHits(querySuggestions, false);\n  var finalSuggestions = (0, _suggestions2.default)({\n    fields: ['key', 'key.autosuggest', 'key.search'],\n    suggestions: parsedSuggestions || [],\n    currentValue: currentValue.toLowerCase(),\n    showDistinctSuggestions: showDistinctSuggestions\n  });\n  return withClickIds(finalSuggestions);\n};\n\nfunction isValidDateRangeQueryFormat(queryFormat) {\n  return Object.keys(_dateFormats2.default).includes(queryFormat);\n}\n\nvar suggestionTypes = exports.suggestionTypes = {\n  Popular: 'popular',\n  Index: 'index',\n  Recent: 'recent',\n  Promoted: 'promoted'\n};\nvar queryFormatMillisecondsMap = exports.queryFormatMillisecondsMap = {\n  minute: 60000,\n  hour: 3600000,\n  day: 86400000,\n  week: 604800000,\n  month: 2629746000,\n  quarter: 7889238000,\n  year: 31556952000\n};\n\nvar getCalendarIntervalErrorMessage = exports.getCalendarIntervalErrorMessage = function getCalendarIntervalErrorMessage(totalRange) {\n  var calendarInterval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'minute';\n  var queryFormatMillisecondsMapKeys = Object.keys(queryFormatMillisecondsMap);\n  var indexOfCurrentCalendarInterval = queryFormatMillisecondsMapKeys.indexOf(calendarInterval);\n\n  if (indexOfCurrentCalendarInterval === -1) {\n    console.error('Invalid calendarInterval Passed');\n  }\n\n  if (calendarInterval === 'year') {\n    return 'Try using a shorter range of values.';\n  }\n\n  for (var index = indexOfCurrentCalendarInterval + 1; index < queryFormatMillisecondsMapKeys.length; index += 1) {\n    if (totalRange / Object.values(queryFormatMillisecondsMap)[index] <= 100) {\n      var calendarIntervalKey = queryFormatMillisecondsMapKeys[index];\n      return {\n        errorMessage: 'Please pass calendarInterval prop with value greater than or equal to a `' + calendarIntervalKey + '` for a meaningful resolution of histogram.',\n        calculatedCalendarInterval: calendarIntervalKey\n      };\n    }\n  }\n\n  return {\n    errorMessage: 'Try using a shorter range of values.',\n    calculatedCalendarInterval: 'year'\n  };\n};","map":{"version":3,"sources":["/Users/karina/Main/Study/Web Dev/test-api/node_modules/@appbaseio/reactivecore/lib/utils/helper.js"],"names":["Object","defineProperty","exports","value","getCalendarIntervalErrorMessage","queryFormatMillisecondsMap","suggestionTypes","getTopSuggestions","withClickIds","getCompositeAggsQuery","getAggsQuery","extractQueryFromDefaultQuery","updateInternalQuery","getSearchState","getOptionsFromQuery","parseHits","handleA11yAction","getInnerKey","getClassName","checkSomePropChange","checkPropChange","updateDefaultQuery","updateCustomQuery","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isEqual","debounce","getQueryOptions","buildQuery","pushToAndClause","checkValueChange","getAggsOrder","formatDate","getResultStats","extractFieldsFromSource","normalizeDataField","handleOnSuggestions","isValidDateRangeQueryFormat","_dateFormats","require","_dateFormats2","_interopRequireDefault","_suggestions","_suggestions2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","enumerable","configurable","writable","componentId","props","customQuery","setCustomQuery","defaultQuery","setDefaultQuery","x","y","constructor","p","_p","callback","wait","context","timeout","callbackArgs","later","apply","debouncedFunction","clearTimeout","setTimeout","options","size","includeFields","excludeFields","includes","excludes","_source","getOperation","conjunction","createBoolQuery","operation","query","resultQuery","bool","minimum_should_match","getQuery","react","queryList","forEach","queryArr","map","comp","filter","item","boolQuery","concat","_operation","_boolQuery","_boolQuery2","must","getExternalQueryOptions","component","queryOptions","dependencyTree","queryObj","reactProp","and","beforeValueChange","performUpdate","selectedValue","handleError","e","console","warn","promise","Promise","then","catch","sortBy","_count","_term","prevProp","nextProp","prevProps","nextProps","propsList","some","prop","classMap","preventDefault","highlightResults","result","data","highlight","highlightItem","highlightValue","hits","showHighlighted","results","reduce","date","parseDate","queryFormat","getTime","Math","floor","toString","rest","computeResultStats","searchState","promotedResults","_ref","hidden","total","time","resultStats","numberOfResults","promoted","state","forHeaders","selectedValues","queryLog","aggregations","isLoading","error","settings","customData","rawData","populateState","componentState","title","label","componentType","category","URLParams","defaultQueryToExecute","queryParams","defaultQueryOptions","queryTobeSet","_ref3","setQueryOptions","updateQuery","queryToBeReturned","evaluateQuery","clonedQuery","dataField","showMissing","missingLabel","aggs","terms","field","order","missing","nestedField","reactivesearch_nested","nested","path","_ref4","_ref4$query","_ref4$after","after","_ref4$showTopHits","showTopHits","aggregationField","finalField","composite","sources","missing_bucket","top_hits","index","_click_id","numberOfPages","ceil","esSource","getFields","prefix","acc","k","Number","isNaN","parseInt","fields","fieldWeights","weight","normalizedField","currentValue","parseSuggestion","enablePredictiveSuggestions","f","newResults","parsedPromotedResults","ids","_id","Boolean","parsedSuggestions","suggestions","toLowerCase","showDistinctSuggestions","enableSynonyms","suggestion","querySuggestions","finalSuggestions","Popular","Index","Recent","Promoted","minute","hour","day","week","month","quarter","year","totalRange","calendarInterval","queryFormatMillisecondsMapKeys","indexOfCurrentCalendarInterval","values","calendarIntervalKey","errorMessage","calculatedCalendarInterval"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});exports.getCalendarIntervalErrorMessage=exports.queryFormatMillisecondsMap=exports.suggestionTypes=exports.getTopSuggestions=exports.withClickIds=exports.getCompositeAggsQuery=exports.getAggsQuery=exports.extractQueryFromDefaultQuery=exports.updateInternalQuery=exports.getSearchState=exports.getOptionsFromQuery=exports.parseHits=exports.handleA11yAction=exports.getInnerKey=exports.getClassName=exports.checkSomePropChange=exports.checkPropChange=exports.updateDefaultQuery=exports.updateCustomQuery=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.isEqual=isEqual;exports.debounce=debounce;exports.getQueryOptions=getQueryOptions;exports.buildQuery=buildQuery;exports.pushToAndClause=pushToAndClause;exports.checkValueChange=checkValueChange;exports.getAggsOrder=getAggsOrder;exports.formatDate=formatDate;exports.getResultStats=getResultStats;exports.extractFieldsFromSource=extractFieldsFromSource;exports.normalizeDataField=normalizeDataField;exports.handleOnSuggestions=handleOnSuggestions;exports.isValidDateRangeQueryFormat=isValidDateRangeQueryFormat;var _dateFormats=require('./dateFormats');var _dateFormats2=_interopRequireDefault(_dateFormats);var _suggestions=require('./suggestions');var _suggestions2=_interopRequireDefault(_suggestions);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var updateCustomQuery=exports.updateCustomQuery=function updateCustomQuery(componentId,props,value){if(props.customQuery&&typeof props.customQuery==='function'){props.setCustomQuery(componentId,props.customQuery(value,props));}};var updateDefaultQuery=exports.updateDefaultQuery=function updateDefaultQuery(componentId,props,value){if(props.defaultQuery&&typeof props.defaultQuery==='function'){props.setDefaultQuery(componentId,props.defaultQuery(value,props));}};function isEqual(x,y){if(x===y)return true;if(!(x instanceof Object)||!(y instanceof Object))return false;if(x.constructor!==y.constructor)return false;for(var p in x){if(!x.hasOwnProperty(p))continue;if(!y.hasOwnProperty(p))return false;if(x[p]===y[p])continue;if(typeof x[p]!=='object')return false;if(!isEqual(x[p],y[p]))return false;}for(var _p in y){if(y.hasOwnProperty(_p)&&!x.hasOwnProperty(_p))return false;}return true;}function debounce(callback,wait){var context=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var timeout=null;var callbackArgs=null;var later=function later(){return callback.apply(context,callbackArgs);};return function debouncedFunction(){callbackArgs=arguments;clearTimeout(timeout);timeout=setTimeout(later,wait);};}function getQueryOptions(props){var options={};if(props.size!==undefined){options.size=props.size;}if(props.includeFields||props.excludeFields){var source={};if(props.includeFields){source.includes=props.includeFields;}if(props.excludeFields){source.excludes=props.excludeFields;}options._source=source;}return options;}function getOperation(conjunction){if(conjunction==='and'){return'must';}if(conjunction==='or'){return'should';}return'must_not';}function createBoolQuery(operation,query){var resultQuery=null;if(Array.isArray(query)&&query.length||!Array.isArray(query)&&query){resultQuery={bool:_defineProperty({},operation,query)};}if(operation==='should'&&resultQuery){resultQuery={bool:_extends({},resultQuery.bool,{minimum_should_match:1})};}return resultQuery;}function getQuery(react,queryList){var query=[];Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){var operation=getOperation(conjunction);var queryArr=react[conjunction].map(function(comp){if(typeof comp!=='string'){return getQuery(comp,queryList);}else if(comp in queryList){return queryList[comp];}return null;}).filter(function(item){return!!item;});var boolQuery=createBoolQuery(operation,queryArr);if(boolQuery){query=[].concat(_toConsumableArray(query),[boolQuery]);}}else if(typeof react[conjunction]==='string'){var _operation=getOperation(conjunction);var _boolQuery=createBoolQuery(_operation,queryList[react[conjunction]]);if(_boolQuery){query=[].concat(_toConsumableArray(query),[_boolQuery]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null){var _boolQuery2=getQuery(react[conjunction],queryList);if(_boolQuery2){query=[].concat(_toConsumableArray(query),[_boolQuery2]);}}});if(Array.isArray(query)&&query.length){return{bool:{must:query}};}if(query&&Object.keys(query).length){return query;}return null;}function getExternalQueryOptions(react,options,component){var queryOptions={};Object.keys(react).forEach(function(conjunction){if(Array.isArray(react[conjunction])){react[conjunction].forEach(function(comp){if(options[comp]){queryOptions=_extends({},queryOptions,options[comp]);}});}else if(typeof react[conjunction]==='string'){if(options[react[conjunction]]){queryOptions=_extends({},queryOptions,options[react[conjunction]]);}}else if(typeof react[conjunction]==='object'&&react[conjunction]!==null&&!Array.isArray(react[conjunction])){queryOptions=_extends({},queryOptions,getExternalQueryOptions(react[conjunction],options));}});if(options[component]){queryOptions=_extends({},queryOptions,options[component]);}return queryOptions;}function buildQuery(component,dependencyTree,queryList,queryOptions){var queryObj=null;var options=null;if(component in dependencyTree){queryObj=getQuery(dependencyTree[component],queryList);options=getExternalQueryOptions(dependencyTree[component],queryOptions,component);}return{queryObj:queryObj,options:options};}function pushToAndClause(reactProp,component){var react=_extends({},reactProp);if(react.and){if(Array.isArray(react.and)){react.and=[].concat(_toConsumableArray(react.and),[component]);return react;}else if(typeof react.and==='string'){react.and=[react.and,component];return react;}react.and=pushToAndClause(react.and,component);return react;}return _extends({},react,{and:component});}function checkValueChange(componentId,value,beforeValueChange,performUpdate){var selectedValue=value;if(Array.isArray(value)&&!value.length){selectedValue=null;}var handleError=function handleError(e){console.warn(componentId+' - beforeValueChange rejected the promise with ',e);};if(beforeValueChange){try{var promise=beforeValueChange(selectedValue);if(promise instanceof Promise){promise.then(performUpdate).catch(handleError);}else{performUpdate();}}catch(e){handleError(e);}}else{performUpdate();}}function getAggsOrder(sortBy){if(sortBy==='count'){return{_count:'desc'};}return{_term:sortBy};}var checkPropChange=exports.checkPropChange=function checkPropChange(prevProp,nextProp,callback){if(!isEqual(prevProp,nextProp)){callback();return true;}return false;};var checkSomePropChange=exports.checkSomePropChange=function checkSomePropChange(){var prevProps=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var nextProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var propsList=arguments[2];var callback=arguments[3];propsList.some(function(prop){return checkPropChange(prevProps[prop],nextProps[prop],callback);});};var getClassName=exports.getClassName=function getClassName(classMap,component){return classMap&&classMap[component]||'';};var getInnerKey=exports.getInnerKey=function getInnerKey(obj,key){return obj&&obj[key]||{};};var handleA11yAction=exports.handleA11yAction=function handleA11yAction(e,callback){if(e.key==='Enter'||e.key===' '){e.preventDefault();callback();}};var highlightResults=function highlightResults(result){var data=_extends({},result);if(data.highlight){Object.keys(data.highlight).forEach(function(highlightItem){var highlightValue=data.highlight[highlightItem][0];data._source=_extends({},data._source,_defineProperty({},highlightItem,highlightValue));});}return data;};var parseHits=exports.parseHits=function parseHits(hits){var showHighlighted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var results=null;if(hits){results=[].concat(_toConsumableArray(hits)).map(function(item){var data=_extends({},item);if(showHighlighted)data=highlightResults(item);var result=Object.keys(data).filter(function(key){return key!=='_source';}).reduce(function(obj,key){obj[key]=data[key];return obj;},_extends({highlight:data.highlight||{}},data._source));return result;});}return results;};function formatDate(date,props){if(props.parseDate){return props.parseDate(date,props);}switch(props.queryFormat){case'epoch_millis':return date.getTime();case'epoch_second':return Math.floor(date.getTime()/1000);default:{if(_dateFormats2.default[props.queryFormat]){return date.toString(_dateFormats2.default[props.queryFormat]);}return date.getTime();}}}var getOptionsFromQuery=function getOptionsFromQuery(){var customQuery=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(customQuery){var query=customQuery.query,rest=_objectWithoutProperties(customQuery,['query']);return Object.keys(rest).length?rest:null;}return null;};exports.getOptionsFromQuery=getOptionsFromQuery;function computeResultStats(hits,searchState,promotedResults){Object.keys(hits).forEach(function(componentId){var _ref=hits[componentId]||{},hidden=_ref.hidden,total=_ref.total,time=_ref.time;searchState[componentId]=_extends({},searchState[componentId],{resultStats:_extends({},searchState[componentId].resultStats,{numberOfResults:total,time:time,promoted:promotedResults[componentId]&&promotedResults[componentId].length,hidden:hidden||0})});});}var getSearchState=exports.getSearchState=function getSearchState(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var forHeaders=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var selectedValues=state.selectedValues,queryLog=state.queryLog,dependencyTree=state.dependencyTree,props=state.props,hits=state.hits,aggregations=state.aggregations,isLoading=state.isLoading,error=state.error,promotedResults=state.promotedResults,settings=state.settings,customData=state.customData,rawData=state.rawData;var searchState={};var populateState=function populateState(){var obj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var key=arguments[1];return Object.keys(obj).forEach(function(componentId){searchState[componentId]=_extends({},searchState[componentId],key?_defineProperty({},key,obj[componentId]):obj[componentId]);});};populateState(props);Object.keys(selectedValues).forEach(function(componentId){var componentState=searchState[componentId];var selectedValue=selectedValues[componentId];if(selectedValue){searchState[componentId]=_extends({},componentState,_extends({title:selectedValue.label,componentType:selectedValue.componentType,value:selectedValue.value},selectedValue.category&&{category:selectedValue.category},{URLParams:selectedValue.URLParams}));}});if(!forHeaders){populateState(queryLog);populateState(hits,'hits');populateState(aggregations,'aggregations');populateState(isLoading,'isLoading');populateState(error,'error');populateState(promotedResults,'promotedData');populateState(settings,'settings');populateState(customData,'customData');populateState(rawData,'rawData');computeResultStats(hits,searchState,promotedResults);}populateState(dependencyTree,'react');return searchState;};var updateInternalQuery=exports.updateInternalQuery=function updateInternalQuery(componentId,queryOptions,value,props,defaultQueryToExecute,queryParams){var defaultQuery=props.defaultQuery;var defaultQueryOptions=void 0;var query=void 0;if(defaultQuery){var queryTobeSet=defaultQuery(value,props);var _ref3=queryTobeSet||{};query=_ref3.query;defaultQueryOptions=getOptionsFromQuery(queryTobeSet);updateDefaultQuery(componentId,props,value);}props.setQueryOptions(componentId,_extends({},defaultQueryOptions,queryOptions||defaultQueryToExecute));if(query){props.updateQuery(_extends({componentId:componentId,query:query,value:value},queryParams));}};var extractQueryFromDefaultQuery=function extractQueryFromDefaultQuery(props,value){var queryToBeReturned={};var defaultQuery=props.defaultQuery;if(defaultQuery){var evaluateQuery=defaultQuery(value,props);if(evaluateQuery){var query=evaluateQuery.query,options=_objectWithoutProperties(evaluateQuery,['query']);if(options){queryToBeReturned=options;}}}return queryToBeReturned;};exports.extractQueryFromDefaultQuery=extractQueryFromDefaultQuery;var getAggsQuery=exports.getAggsQuery=function getAggsQuery(value,query,props){var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,missingLabel=props.missingLabel;clonedQuery.size=0;clonedQuery.aggs=_defineProperty({},dataField,{terms:_extends({field:dataField,size:size,order:getAggsOrder(sortBy||'count')},showMissing?{missing:missingLabel}:{})});if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var getCompositeAggsQuery=exports.getCompositeAggsQuery=function getCompositeAggsQuery(){var _ref4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref4$query=_ref4.query,query=_ref4$query===undefined?{}:_ref4$query,props=_ref4.props,_ref4$after=_ref4.after,after=_ref4$after===undefined?null:_ref4$after,_ref4$showTopHits=_ref4.showTopHits,showTopHits=_ref4$showTopHits===undefined?false:_ref4$showTopHits,value=_ref4.value;var clonedQuery=query;var dataField=props.dataField,size=props.size,sortBy=props.sortBy,showMissing=props.showMissing,aggregationField=props.aggregationField;var finalField=aggregationField||dataField;var order=sortBy==='count'?{}:{order:sortBy};clonedQuery.aggs=_defineProperty({},finalField,_extends({composite:_extends({sources:[_defineProperty({},finalField,{terms:_extends({field:finalField},order,showMissing?{missing_bucket:true}:{})})],size:size},after)},showTopHits?{aggs:_defineProperty({},finalField,{top_hits:{size:1}})}:{}));clonedQuery.size=0;if(props.nestedField){clonedQuery.aggs={reactivesearch_nested:{nested:{path:props.nestedField},aggs:clonedQuery.aggs}};}return _extends({},clonedQuery,extractQueryFromDefaultQuery(props,value));};var withClickIds=exports.withClickIds=function withClickIds(){var results=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return results.map(function(result,index){return _extends({},result,{_click_id:index});});};function getResultStats(props){var total=props.total,size=props.size,time=props.time,hidden=props.hidden,promotedResults=props.promotedResults;return _extends({numberOfResults:total},size>0?{numberOfPages:Math.ceil(total/size)}:null,{time:time||0,hidden:hidden,promoted:promotedResults&&promotedResults.length});}function extractFieldsFromSource(esSource){function getFields(){var source=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';return Object.keys(source).reduce(function(){var acc=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var k=arguments[1];var key=prefix?prefix+'.'+k:k;if(!Number.isNaN(parseInt(k,10))){key=prefix||k;}if(source[k]&&typeof source[k]==='object'){return _extends({},acc,getFields(source[k],key));}return _extends({},acc,_defineProperty({},key,true));},[]);}var fields=getFields(esSource);return Object.keys(fields);}function normalizeDataField(dataField){var fieldWeights=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(typeof dataField==='string'){return[{field:dataField,weight:fieldWeights.length?fieldWeights[0]:undefined}];}if(Array.isArray(dataField)){return dataField.map(function(field,index){var normalizedField={};if(typeof field==='string'){normalizedField.field=field;if(fieldWeights.length>index){normalizedField.weight=fieldWeights[index];}}else if(typeof field==='object'&&field&&field.field){normalizedField.field=field.field;normalizedField.weight=field.weight;}return normalizedField;});}if(typeof dataField==='object'&&dataField){return[{field:dataField.field,weight:dataField.weight}];}return[];}function handleOnSuggestions(results,currentValue,props){var parseSuggestion=props.parseSuggestion,promotedResults=props.promotedResults,enablePredictiveSuggestions=props.enablePredictiveSuggestions;var fields=[];if(props.dataField){fields=normalizeDataField(props.dataField).map(function(f){return f.field;});}else if(results&&Array.isArray(results)&&results.length>0&&results[0]&&results[0]._source){fields=extractFieldsFromSource(results[0]._source);}var newResults=parseHits(results,false);var parsedPromotedResults=parseHits(promotedResults,false);if(parsedPromotedResults&&parsedPromotedResults.length){var ids=parsedPromotedResults.map(function(item){return item._id;}).filter(Boolean);if(ids){newResults=newResults.filter(function(item){return!ids.includes(item._id);});}newResults=[].concat(_toConsumableArray(parsedPromotedResults),_toConsumableArray(newResults));}var parsedSuggestions=(0,_suggestions2.default)({fields:fields,suggestions:newResults,currentValue:currentValue.toLowerCase(),showDistinctSuggestions:props.showDistinctSuggestions,enablePredictiveSuggestions:enablePredictiveSuggestions,enableSynonyms:props.enableSynonyms});if(parseSuggestion){return parsedSuggestions.map(function(suggestion){return parseSuggestion(suggestion);});}return parsedSuggestions;}var getTopSuggestions=exports.getTopSuggestions=function getTopSuggestions(querySuggestions){var currentValue=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var showDistinctSuggestions=arguments[2];var parsedSuggestions=parseHits(querySuggestions,false);var finalSuggestions=(0,_suggestions2.default)({fields:['key','key.autosuggest','key.search'],suggestions:parsedSuggestions||[],currentValue:currentValue.toLowerCase(),showDistinctSuggestions:showDistinctSuggestions});return withClickIds(finalSuggestions);};function isValidDateRangeQueryFormat(queryFormat){return Object.keys(_dateFormats2.default).includes(queryFormat);}var suggestionTypes=exports.suggestionTypes={Popular:'popular',Index:'index',Recent:'recent',Promoted:'promoted'};var queryFormatMillisecondsMap=exports.queryFormatMillisecondsMap={minute:60000,hour:3600000,day:86400000,week:604800000,month:2629746000,quarter:7889238000,year:31556952000};var getCalendarIntervalErrorMessage=exports.getCalendarIntervalErrorMessage=function getCalendarIntervalErrorMessage(totalRange){var calendarInterval=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'minute';var queryFormatMillisecondsMapKeys=Object.keys(queryFormatMillisecondsMap);var indexOfCurrentCalendarInterval=queryFormatMillisecondsMapKeys.indexOf(calendarInterval);if(indexOfCurrentCalendarInterval===-1){console.error('Invalid calendarInterval Passed');}if(calendarInterval==='year'){return'Try using a shorter range of values.';}for(var index=indexOfCurrentCalendarInterval+1;index<queryFormatMillisecondsMapKeys.length;index+=1){if(totalRange/Object.values(queryFormatMillisecondsMap)[index]<=100){var calendarIntervalKey=queryFormatMillisecondsMapKeys[index];return{errorMessage:'Please pass calendarInterval prop with value greater than or equal to a `'+calendarIntervalKey+'` for a meaningful resolution of histogram.',calculatedCalendarInterval:calendarIntervalKey};}}return{errorMessage:'Try using a shorter range of values.',calculatedCalendarInterval:'year'};};"]},"metadata":{},"sourceType":"script"}