{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/** @jsx jsx */\n\n\nvar ReactiveList = function (_Component) {\n  _inherits(ReactiveList, _Component);\n\n  function ReactiveList(props) {\n    _classCallCheck(this, ReactiveList); // no support for pagination and aggregationField together\n\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    if (props.pagination && props.aggregationField) {\n      console.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n    }\n\n    var currentPage = 0;\n\n    if (_this.props.defaultPage >= 0) {\n      currentPage = _this.props.defaultPage;\n    } else if (_this.props.currentPage) {\n      currentPage = Math.max(_this.props.currentPage - 1, 0);\n    }\n\n    _this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\n    _this.shouldRenderPagination = props.pagination && !props.aggregationField;\n    _this.state = {\n      from: _this.initialFrom,\n      currentPage: currentPage\n    };\n    _this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n    _this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n      return s.label === _this.props.defaultSortOption;\n    }) : 0;\n\n    if (_this.props.urlSortOption) {\n      _this.sortOptionIndex = _this.props.sortOptions.findIndex(function (s) {\n        return s.label === _this.props.urlSortOption;\n      }) || 0;\n    }\n\n    return _this;\n  }\n\n  ReactiveList.prototype.componentDidMount = function componentDidMount() {\n    var _props = this.props,\n        aggregationField = _props.aggregationField,\n        distinctField = _props.distinctField,\n        distinctFieldConfig = _props.distinctFieldConfig,\n        index = _props.index,\n        enableAppbase = _props.enableAppbase;\n\n    if (enableAppbase && aggregationField) {\n      console.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n    }\n\n    if (!enableAppbase && (distinctField || distinctFieldConfig)) {\n      console.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    if (!enableAppbase && index) {\n      console.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n    }\n\n    var options = (0, _helper.getQueryOptions)(this.props);\n    options.from = this.state.from;\n\n    if (this.props.sortOptions) {\n      var _ref;\n\n      var sortField = this.props.sortOptions[this.sortOptionIndex].dataField;\n      var sortBy = this.props.sortOptions[this.sortOptionIndex].sortBy;\n      options.sort = [(_ref = {}, _ref[sortField] = {\n        order: sortBy\n      }, _ref)]; // To handle sort options for RS API\n\n      this.props.updateComponentProps(this.props.componentId, Object.assign({}, this.props, {\n        dataField: sortField\n      }, {\n        sortBy: sortBy\n      }, this.absProps), _constants.componentTypes.reactiveList);\n    } else if (this.props.sortBy) {\n      var _ref2;\n\n      options.sort = [(_ref2 = {}, _ref2[this.props.dataField] = {\n        order: this.props.sortBy\n      }, _ref2)];\n    } // Override sort query with defaultQuery's sort if defined\n\n\n    this.defaultQuery = null;\n\n    if (this.props.defaultQuery) {\n      this.defaultQuery = this.props.defaultQuery();\n      options = _extends({}, options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n    }\n\n    var _ref3 = this.defaultQuery || {},\n        query = _ref3.query; // execute is set to false at the time of mount\n    // to avoid firing (multiple) partial queries.\n    // Hence we are building the query in parts here\n    // and only executing it with setReact() at core\n\n\n    var execute = false;\n    this.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), execute);\n\n    if (this.defaultQuery) {\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query\n      }, execute); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n    } else {\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: null\n      }, execute);\n    }\n\n    this.domNode = window;\n\n    if (this.showInfiniteScroll) {\n      var scrollTarget = this.props.scrollTarget;\n\n      if (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n        this.domNode = document.getElementById(scrollTarget);\n      } else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n        this.domNode = scrollTarget;\n      }\n\n      this.domNode.addEventListener('scroll', this.scrollHandler);\n    }\n  };\n\n  ReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var _this2 = this;\n\n    var totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n\n    if (this.props.onData) {\n      (0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'promotedResults', 'customData', 'total', 'size', 'time', 'hidden'], function () {\n        _this2.props.onData(_this2.getData());\n      });\n    }\n\n    if (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields)) {\n      var options = (0, _helper.getQueryOptions)(this.props);\n      options.from = this.state.from;\n\n      if (this.props.sortOptions) {\n        var _ref4;\n\n        options.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n          order: this.props.sortOptions[this.sortOptionIndex].sortBy\n        }, _ref4)];\n      } else if (this.props.sortBy) {\n        var _ref5;\n\n        options.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n          order: this.props.sortBy\n        }, _ref5)];\n      }\n\n      this.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n    }\n\n    if (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n      var _options = (0, _helper.getQueryOptions)(this.props);\n\n      _options.from = 0;\n      this.defaultQuery = this.props.defaultQuery(); // Update calculated default query in store\n\n      (0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n      var query = this.defaultQuery.query;\n      var queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\n      if (queryOptions) {\n        _options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n        this.props.setQueryOptions(this.props.componentId, _options, !query);\n      }\n\n      this.props.updateQuery({\n        componentId: this.internalComponent,\n        query: query\n      }, true); // reset page because of query change\n      // eslint-disable-next-line\n\n      this.setState({\n        currentPage: 0,\n        from: 0\n      }, function () {\n        _this2.updatePageURL(0);\n      });\n    }\n\n    if (this.shouldRenderPagination) {\n      // called when page is changed\n      if (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n        if (this.props.onPageChange) {\n          this.props.onPageChange(this.state.currentPage + 1, totalPages);\n        } else if (this.props.scrollOnChange && this.props.pagination) {\n          this.scrollToTop();\n        }\n      }\n\n      if (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n        this.setPage(this.props.currentPage - 1);\n      }\n    }\n\n    if (this.showInfiniteScroll) {\n      if (this.props.hits && prevProps.hits) {\n        if ( // new items are loaded (from: 0)\n        this.props.hits.length < prevProps.hits.length // new items are loaded and 'from' hasn't changed\n        || this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n          // query has changed\n          if (this.props.scrollOnChange) {\n            this.scrollToTop();\n          } // eslint-disable-next-line\n\n\n          this.setState({\n            from: 0\n          });\n        }\n      }\n    }\n\n    if (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n      // usecase:\n      // - query has changed from non-null prev query\n      if (this.props.queryLog.from !== this.state.from) {\n        // query's 'from' key doesn't match the state's 'from' key,\n        // i.e. this query change was not triggered by the page change (loadMore)\n        // eslint-disable-next-line\n        this.setState({\n          currentPage: 0\n        }, function () {\n          _this2.updatePageURL(0);\n        });\n\n        if (this.props.onPageChange) {\n          this.props.onPageChange(1, totalPages);\n        }\n      }\n    } // handle window url history change (on native back and forth interactions)\n\n\n    if (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n      this.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n    }\n  };\n\n  ReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.domNode) {\n      this.domNode.removeEventListener('scroll', this.scrollHandler);\n    }\n  }; // Calculate results\n\n\n  ReactiveList.prototype.render = function render() {\n    var _props2 = this.props,\n        renderItem = _props2.renderItem,\n        size = _props2.size,\n        error = _props2.error,\n        renderPagination = _props2.renderPagination,\n        analytics = _props2.analytics;\n    var currentPage = this.state.currentPage;\n\n    var _getAllData = this.getAllData(),\n        filteredResults = _getAllData.filteredResults;\n\n    var paginationProps = {\n      pages: this.props.pages,\n      totalPages: Math.ceil(this.props.total / size),\n      currentPage: this.state.currentPage,\n      setPage: this.setPage,\n      showEndPage: this.props.showEndPage,\n      innerClass: this.props.innerClass,\n      fragmentName: this.props.componentId\n    };\n    var paginationElement = renderPagination ? renderPagination(paginationProps) : (0, _core.jsx)(_Pagination2.default, paginationProps);\n    var base = currentPage * size;\n    return (0, _core.jsx)('div', {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.isLoading && this.shouldRenderPagination && this.props.loader, this.renderError(), (0, _core.jsx)(_Flex2.default, {\n      labelPosition: this.props.sortOptions ? 'right' : 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo')\n    }, this.props.sortOptions ? this.renderSortOptions() : null, this.props.showResultStats ? this.renderResultStats() : null), !this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null, this.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, (0, _core.jsx)(_Results2.default, {\n      base: base,\n      analytics: analytics,\n      hasCustomRender: this.hasCustomRenderer,\n      getComponent: this.getComponent,\n      listClass: this.props.listClass,\n      innerClass: this.props.innerClass,\n      renderItem: renderItem,\n      triggerClickAnalytics: this.triggerClickAnalytics,\n      filteredResults: filteredResults\n    }), this.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || (0, _core.jsx)('div', {\n      style: {\n        textAlign: 'center',\n        margin: '20px 0',\n        color: '#666'\n      }\n    }, 'Loading...') // prettier-ignore\n    : null, this.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null, (0, _core.jsx)(_PoweredBy2.default, {\n      show: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n      innerClass: this.props.innerClass\n    }));\n  };\n\n  _createClass(ReactiveList, [{\n    key: 'stats',\n    get: function get() {\n      var currentPage = this.state.currentPage;\n\n      var _getAllData2 = this.getAllData(),\n          filteredResults = _getAllData2.filteredResults;\n\n      return _extends({}, (0, _helper.getResultStats)(this.props), {\n        currentPage: currentPage,\n        displayedResults: filteredResults.length\n      });\n    } // Returns the props without default props to apply search relevancy settings for RS API\n\n  }, {\n    key: 'absProps',\n    get: function get() {\n      var _props$originalProps = this.props.originalProps,\n          includeFields = _props$originalProps.includeFields,\n          excludeFields = _props$originalProps.excludeFields,\n          size = _props$originalProps.size;\n      return {\n        includeFields: includeFields || undefined,\n        excludeFields: excludeFields || undefined,\n        size: size || undefined\n      };\n    }\n  }, {\n    key: 'showInfiniteScroll',\n    get: function get() {\n      // Pagination has higher priority then infinite scroll\n      var infiniteScroll = this.props.infiniteScroll;\n      return infiniteScroll && !this.shouldRenderPagination;\n    }\n  }, {\n    key: 'hasCustomRenderer',\n    get: function get() {\n      return (0, _utils.hasCustomRenderer)(this.props);\n    } // only used for SSR\n\n  }]);\n\n  return ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref6) {\n  var children = _ref6.children,\n      rest = _objectWithoutProperties(_ref6, ['children']);\n\n  return (0, _core.jsx)('div', _extends({\n    css: _Card.container\n  }, rest), children);\n};\n\nReactiveList.ResultListWrapper = function (_ref7) {\n  var children = _ref7.children,\n      rest = _objectWithoutProperties(_ref7, ['children']);\n\n  return (0, _core.jsx)('div', _extends({\n    css: _ListItem.container\n  }, rest), children);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n  // simulate default (includeFields and excludeFields) props to generate consistent query\n  var options = (0, _helper.getQueryOptions)(_extends({\n    includeFields: ['*'],\n    excludeFields: []\n  }, props));\n  var size = props.size,\n      dataField = props.dataField,\n      defaultSortOption = props.defaultSortOption,\n      sortOptionsNew = props.sortOptions,\n      currentPage = props.currentPage,\n      sortBy = props.sortBy;\n  options.from = currentPage ? (currentPage - 1) * (size || 10) : 0;\n  options.size = size || 10;\n\n  var getSortOption = function getSortOption() {\n    var _ref9;\n\n    if (defaultSortOption) {\n      var sortOption = sortOptionsNew.find(function (option) {\n        return option.label === defaultSortOption;\n      });\n\n      if (sortOption) {\n        var _ref8;\n\n        return _ref8 = {}, _ref8[sortOption.dataField] = {\n          order: sortOption.sortBy\n        }, _ref8;\n      }\n    }\n\n    return _ref9 = {}, _ref9[sortOptionsNew[0].dataField] = {\n      order: sortOptionsNew[0].sortBy\n    }, _ref9;\n  };\n\n  if (sortOptionsNew) {\n    options.sort = [getSortOption()];\n  } else if (sortBy) {\n    var _ref10;\n\n    options.sort = [(_ref10 = {}, _ref10[dataField] = {\n      order: sortBy\n    }, _ref10)];\n  }\n\n  return options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.getAggsQuery = function () {\n    var _props3 = _this3.props,\n        size = _props3.size,\n        aggregationField = _props3.aggregationField,\n        afterKey = _props3.afterKey;\n    var queryOptions = {\n      size: size\n    };\n\n    if (aggregationField) {\n      queryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n        props: _this3.props,\n        after: afterKey ? {\n          after: afterKey\n        } : null,\n        showTopHits: true\n      }).aggs;\n    }\n\n    return queryOptions;\n  };\n\n  this.getAllData = function () {\n    var _props4 = _this3.props,\n        size = _props4.size,\n        promotedResults = _props4.promotedResults,\n        aggregationData = _props4.aggregationData,\n        customData = _props4.customData;\n    var currentPage = _this3.state.currentPage;\n    var results = (0, _helper.parseHits)(_this3.props.hits) || [];\n    var parsedPromotedResults = (0, _helper.parseHits)(promotedResults) || [];\n    var filteredResults = results;\n    var base = currentPage * size;\n\n    if (parsedPromotedResults.length) {\n      var ids = parsedPromotedResults.map(function (item) {\n        return item._id;\n      }).filter(Boolean);\n\n      if (ids) {\n        filteredResults = filteredResults.filter(function (item) {\n          return !ids.includes(item._id);\n        });\n      }\n\n      filteredResults = [].concat(parsedPromotedResults, filteredResults);\n    }\n\n    return {\n      results: results,\n      filteredResults: filteredResults,\n      promotedResults: parsedPromotedResults,\n      customData: customData || {},\n      aggregationData: aggregationData || [],\n      loadMore: _this3.loadMore,\n      base: base,\n      triggerClickAnalytics: _this3.triggerClickAnalytics\n    };\n  };\n\n  this.scrollToTop = function () {\n    if (_this3.domNode === window) {\n      document.documentElement.scrollTop = 0;\n      document.body.scrollTop = 0;\n    } else {\n      _this3.domNode.scrollTop = 0;\n    }\n  };\n\n  this.scrollHandler = function () {\n    var renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.scrollHeight;\n\n    if (_this3.props.scrollTarget) {\n      renderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n    }\n\n    if (!_this3.props.isLoading && renderLoader) {\n      _this3.loadMore();\n    }\n  };\n\n  this.loadMore = function () {\n    if (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\n    if (_this3.props.hits && _this3.props.total > _this3.props.hits.length) {\n      var value = _this3.state.from + _this3.props.size; // If current hits length is less than the current from then it means\n      // that there are no results present.\n      // It can happen because of many reasons some of them are:\n      // 1. Using the `collapse` query to remove results\n      // 2. Shard failure\n      // In above cases infinite scroll should not load more results that can\n      // cause the resetting of the `from` value\n\n      if (_this3.props.hits.length < value) {\n        return;\n      }\n\n      var options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\n      _this3.setState({\n        from: value\n      });\n\n      _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n        from: value\n      }), true, !!_this3.props.aggregationField);\n    }\n  };\n\n  this.setPage = function (page) {\n    // onPageClick will be called everytime a pagination button is clicked\n    if (page !== _this3.state.currentPage) {\n      var onPageClick = _this3.props.onPageClick;\n\n      if (onPageClick) {\n        onPageClick(page + 1);\n      }\n\n      var value = _this3.props.size * page;\n      var options = (0, _helper.getQueryOptions)(_this3.props);\n      options.from = _this3.state.from;\n\n      _this3.setState({\n        from: value,\n        currentPage: page\n      }, function () {\n        _this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n          from: value\n        }), false);\n\n        _this3.updatePageURL(page);\n      });\n    }\n  };\n\n  this.renderResultStats = function () {\n    var _props5 = _this3.props,\n        hits = _props5.hits,\n        promotedResults = _props5.promotedResults,\n        total = _props5.total;\n    var shouldStatsVisible = hits && promotedResults && (hits.length || promotedResults.length);\n\n    if (_this3.props.renderResultStats && shouldStatsVisible) {\n      return _this3.props.renderResultStats(_this3.stats);\n    } else if (total) {\n      return (0, _core.jsx)('p', {\n        css: _results.resultStats,\n        className: (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats')\n      }, _this3.props.total, ' results found in ', _this3.props.time, 'ms');\n    }\n\n    return null;\n  };\n\n  this.renderNoResults = function () {\n    return (0, _core.jsx)('div', {\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null\n    }, _this3.props.renderNoResults());\n  };\n\n  this.handleSortChange = function (e) {\n    var _ref11;\n\n    var index = e.target.value;\n    var options = (0, _helper.getQueryOptions)(_this3.props); // This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\n    options.from = 0;\n    var sortField = _this3.props.sortOptions[index].dataField;\n    var sortBy = _this3.props.sortOptions[index].sortBy;\n    options.sort = [(_ref11 = {}, _ref11[sortField] = {\n      order: sortBy\n    }, _ref11)]; // To handle sortOptions for RS API\n\n    _this3.props.updateComponentProps(_this3.props.componentId, Object.assign({}, _this3.props, {\n      dataField: sortField\n    }, {\n      sortBy: sortBy\n    }, _this3.absProps), _constants.componentTypes.reactiveList);\n\n    _this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\n    _this3.sortOptionIndex = index;\n\n    _this3.setState({\n      currentPage: 0,\n      from: 0\n    }, function () {\n      _this3.updatePageURL(0);\n    });\n  };\n\n  this.updatePageURL = function (page) {\n    try {\n      if (_this3.props.sortOptions && _this3.props.sortOptions[_this3.sortOptionIndex]) {\n        var sortOption = _this3.props.sortOptions[_this3.sortOptionIndex].label;\n\n        _this3.props.setPageURL(_this3.props.componentId + 'sortOption', sortOption, _this3.props.componentId + 'sortOption', false, _this3.props.URLParams);\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.log('error\\', ' + error);\n    }\n\n    _this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, _this3.props.URLParams);\n  };\n\n  this.triggerClickAnalytics = function (searchPosition, documentId) {\n    var docId = documentId;\n\n    if (!docId) {\n      var _getData = _this3.getData(),\n          data = _getData.data;\n\n      var hitData = data.find(function (hit) {\n        return hit._click_id === searchPosition;\n      });\n\n      if (hitData && hitData._id) {\n        docId = hitData._id;\n      }\n    }\n\n    _this3.props.triggerAnalytics(searchPosition, docId);\n  };\n\n  this.renderSortOptions = function () {\n    return (0, _core.jsx)('select', {\n      css: _results.sortOptions,\n      className: (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n      name: 'sort-options',\n      'aria-label': 'Sort options',\n      onChange: _this3.handleSortChange,\n      value: _this3.sortOptionIndex\n    }, _this3.props.sortOptions.map(function (sort, index) {\n      return (0, _core.jsx)('option', {\n        key: sort.label,\n        value: index\n      }, sort.label);\n    }));\n  };\n\n  this.renderError = function () {\n    var _props6 = _this3.props,\n        error = _props6.error,\n        isLoading = _props6.isLoading,\n        renderError = _props6.renderError;\n\n    if (renderError && error && !isLoading) {\n      return (0, _utils.isFunction)(renderError) ? renderError(error) : renderError;\n    }\n\n    return null;\n  };\n\n  this.withClickIds = function (results) {\n    var _getAllData3 = _this3.getAllData(),\n        base = _getAllData3.base;\n\n    return results.map(function (result, index) {\n      return _extends({}, result, {\n        _click_id: base + index\n      });\n    });\n  };\n\n  this.getData = function () {\n    var _getAllData4 = _this3.getAllData(),\n        filteredResults = _getAllData4.filteredResults,\n        promotedResults = _getAllData4.promotedResults,\n        aggregationData = _getAllData4.aggregationData,\n        customData = _getAllData4.customData;\n\n    return {\n      data: _this3.withClickIds(filteredResults),\n      aggregationData: _this3.withClickIds(aggregationData || []),\n      promotedData: _this3.withClickIds(promotedResults),\n      customData: customData,\n      rawData: _this3.props.rawData,\n      resultStats: _this3.stats\n    };\n  };\n\n  this.getComponent = function () {\n    var _props7 = _this3.props,\n        error = _props7.error,\n        isLoading = _props7.isLoading;\n\n    var data = _extends({\n      error: error,\n      loading: isLoading,\n      loadMore: _this3.loadMore,\n      // TODO: Remove in v4\n      triggerAnalytics: _this3.triggerClickAnalytics,\n      triggerClickAnalytics: _this3.triggerClickAnalytics\n    }, _this3.getData());\n\n    return (0, _utils.getComponent)(data, _this3.props);\n  };\n};\n\nReactiveList.propTypes = {\n  loadMore: _types2.default.funcRequired,\n  onQueryChange: _types2.default.func,\n  onError: _types2.default.func,\n  setPageURL: _types2.default.func,\n  setQueryOptions: _types2.default.funcRequired,\n  setDefaultQuery: _types2.default.funcRequired,\n  updateComponentProps: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  currentPage: _types2.default.number,\n  hits: _types2.default.hits,\n  rawData: _types2.default.rawData,\n  isLoading: _types2.default.bool,\n  includeFields: _types2.default.includeFields,\n  promotedResults: _types2.default.hits,\n  customData: _types2.default.title,\n  time: _types2.default.number,\n  total: _types2.default.number,\n  hidden: _types2.default.number,\n  config: _types2.default.props,\n  analytics: _types2.default.bool,\n  queryLog: _types2.default.props,\n  error: _types2.default.title,\n  headers: _types2.default.headers,\n  enableAppbase: _types2.default.bool,\n  // component props\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  children: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  aggregationField: _types2.default.string,\n  aggregationSize: _types2.default.number,\n  aggregationData: _types2.default.aggregationData,\n  defaultPage: _types2.default.number,\n  defaultQuery: _types2.default.func,\n  excludeFields: _types2.default.excludeFields,\n  innerClass: _types2.default.style,\n  infiniteScroll: _types2.default.bool,\n  listClass: _types2.default.string,\n  loader: _types2.default.title,\n  render: _types2.default.func,\n  renderItem: _types2.default.func,\n  renderError: _types2.default.title,\n  renderPagination: _types2.default.func,\n  onData: _types2.default.func,\n  renderNoResults: _types2.default.title,\n  onPageChange: _types2.default.func,\n  onPageClick: _types2.default.func,\n  pages: _types2.default.number,\n  pagination: _types2.default.bool,\n  paginationAt: _types2.default.paginationAt,\n  showEndPage: _types2.default.bool,\n  react: _types2.default.react,\n  renderResultStats: _types2.default.func,\n  scrollOnChange: _types2.default.bool,\n  scrollTarget: _types2.default.string,\n  showLoader: _types2.default.bool,\n  showResultStats: _types2.default.bool,\n  size: _types2.default.number,\n  sortBy: _types2.default.sortBy,\n  sortOptions: _types2.default.sortOptions,\n  style: _types2.default.style,\n  triggerAnalytics: _types2.default.funcRequired,\n  URLParams: _types2.default.bool,\n  defaultSortOption: _types2.default.string,\n  afterKey: _types2.default.props,\n  distinctField: _types2.default.string,\n  distinctFieldConfig: _types2.default.componentObject,\n  // eslint-disable-next-line\n  originalProps: _types2.default.any,\n  index: _types2.default.string,\n  urlSortOption: _types2.default.string\n};\nReactiveList.defaultProps = {\n  className: null,\n  currentPage: 0,\n  listClass: '',\n  pages: 5,\n  infiniteScroll: true,\n  pagination: false,\n  analytics: false,\n  paginationAt: 'bottom',\n  showEndPage: false,\n  includeFields: ['*'],\n  excludeFields: [],\n  showResultStats: true,\n  size: 10,\n  style: {},\n  URLParams: false,\n  showLoader: true,\n  renderNoResults: function renderNoResults() {\n    return 'No Results found.';\n  },\n  scrollOnChange: true,\n  defaultSortOption: null,\n  originalProps: {}\n}; // Add componentType for SSR\n\nReactiveList.componentType = _constants.componentTypes.reactiveList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    defaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n    urlSortOption: state.selectedValues[props.componentId + 'sortOption'] && state.selectedValues[props.componentId + 'sortOption'].value,\n    hits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n    rawData: state.rawData[props.componentId],\n    analytics: state.config && state.config.analytics,\n    aggregationData: state.compositeAggregations[props.componentId],\n    isLoading: state.isLoading[props.componentId] || false,\n    time: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n    total: state.hits[props.componentId] && state.hits[props.componentId].total,\n    hidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n    config: state.config,\n    enableAppbase: state.config.enableAppbase,\n    queryLog: state.queryLog[props.componentId],\n    error: state.error[props.componentId],\n    promotedResults: state.promotedResults[props.componentId] || [],\n    customData: state.customData[props.componentId],\n    afterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    setDefaultQuery: function setDefaultQuery(component, query) {\n      return dispatch((0, _actions.setDefaultQuery)(component, query));\n    },\n    updateComponentProps: function updateComponentProps(component, options, componentType) {\n      return dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n    },\n    loadMore: function loadMore(component, options, append, appendAggs) {\n      return dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n    },\n    setPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n      return dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    updateQuery: function updateQuery(updateQueryObject, execute) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n    },\n    triggerAnalytics: function triggerAnalytics(searchPosition, docId) {\n      return dispatch((0, _actions.recordResultClick)(searchPosition, docId));\n    }\n  };\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n  return (0, _core.jsx)(_ComponentWrapper2.default, _extends({\n    internalComponent: true,\n    componentType: _constants.componentTypes.reactiveList\n  }, props), function () {\n    var includeFields = props.includeFields,\n        excludeFields = props.excludeFields,\n        size = props.size;\n    return (0, _core.jsx)(ReactiveList, _extends({\n      ref: props.myForwardedRef\n    }, props, {\n      originalProps: {\n        includeFields: includeFields,\n        excludeFields: excludeFields,\n        size: size\n      }\n    }));\n  });\n})); // eslint-disable-next-line\n\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n  return (0, _core.jsx)(ConnectedComponent, _extends({}, props, {\n    myForwardedRef: ref\n  }));\n});\n\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\nForwardRefComponent.displayName = 'ReactiveList';\nexports.default = ForwardRefComponent;","map":{"version":3,"sources":["/Users/karina/Main/Study/Web Dev/test-api/node_modules/@appbaseio/reactivesearch/lib/components/result/ReactiveList.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_core","require","_react","_react2","_interopRequireDefault","_hoistNonReactStatics","_hoistNonReactStatics2","_emotionTheming","_actions","_helper","_types","_types2","_constants","_transform","_Pagination","_Pagination2","_PoweredBy","_PoweredBy2","_Flex","_Flex2","_results","_Card","_ListItem","_utils","_Results","_Results2","_ComponentWrapper","_ComponentWrapper2","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","ReactiveList","_Component","_this","_initialiseProps","pagination","aggregationField","console","warn","currentPage","defaultPage","Math","max","initialFrom","size","shouldRenderPagination","state","from","internalComponent","getInternalComponentID","componentId","sortOptionIndex","defaultSortOption","sortOptions","findIndex","s","label","urlSortOption","componentDidMount","_props","distinctField","distinctFieldConfig","index","enableAppbase","options","getQueryOptions","_ref","sortField","dataField","sortBy","sort","order","updateComponentProps","absProps","componentTypes","reactiveList","_ref2","defaultQuery","getOptionsFromQuery","_ref3","query","execute","setQueryOptions","getAggsQuery","updateQuery","updateDefaultQuery","domNode","window","showInfiniteScroll","scrollTarget","String","document","getElementById","Element","HTMLDocument","addEventListener","scrollHandler","componentDidUpdate","prevProps","_this2","totalPages","ceil","total","onData","checkSomePropChange","getData","isEqual","includeFields","excludeFields","_ref4","_ref5","_options","queryOptions","setState","updatePageURL","isLoading","hits","onPageChange","scrollOnChange","scrollToTop","setPage","queryLog","componentWillUnmount","removeEventListener","render","_props2","renderItem","error","renderPagination","analytics","_getAllData","getAllData","filteredResults","paginationProps","pages","showEndPage","innerClass","fragmentName","paginationElement","jsx","base","style","className","loader","renderError","labelPosition","getClassName","renderSortOptions","showResultStats","renderResultStats","renderNoResults","paginationAt","hasCustomRender","hasCustomRenderer","getComponent","listClass","triggerClickAnalytics","showLoader","textAlign","margin","color","show","config","url","endsWith","get","_getAllData2","getResultStats","displayedResults","_props$originalProps","originalProps","undefined","infiniteScroll","Component","ResultCardsWrapper","_ref6","children","rest","css","container","ResultListWrapper","_ref7","generateQueryOptions","sortOptionsNew","getSortOption","_ref9","sortOption","find","option","_ref8","_ref10","_this3","_props3","afterKey","aggs","getCompositeAggsQuery","after","showTopHits","_props4","promotedResults","aggregationData","customData","results","parseHits","parsedPromotedResults","ids","map","item","_id","filter","Boolean","includes","concat","loadMore","documentElement","scrollTop","body","renderLoader","innerHeight","pageYOffset","scrollHeight","clientHeight","page","onPageClick","_props5","shouldStatsVisible","stats","resultStats","time","handleSortChange","e","_ref11","setPageURL","URLParams","log","searchPosition","documentId","docId","_getData","data","hitData","hit","_click_id","triggerAnalytics","name","onChange","_props6","isFunction","withClickIds","_getAllData3","result","_getAllData4","promotedData","rawData","_props7","loading","propTypes","funcRequired","onQueryChange","func","onError","setDefaultQuery","number","bool","title","hidden","headers","string","stringRequired","aggregationSize","react","componentObject","any","defaultProps","componentType","mapStateToProps","selectedValues","compositeAggregations","aggregations","after_key","mapDispatchtoProps","dispatch","component","append","appendAggs","showFilter","setValue","updateQueryObject","recordResultClick","ConnectedComponent","connect","withTheme","ref","myForwardedRef","ForwardRefComponent","forwardRef","displayName"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _core = require('@emotion/core');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _hoistNonReactStatics = require('hoist-non-react-statics');\n\nvar _hoistNonReactStatics2 = _interopRequireDefault(_hoistNonReactStatics);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _constants = require('@appbaseio/reactivecore/lib/utils/constants');\n\nvar _transform = require('@appbaseio/reactivecore/lib/utils/transform');\n\nvar _Pagination = require('./addons/Pagination');\n\nvar _Pagination2 = _interopRequireDefault(_Pagination);\n\nvar _PoweredBy = require('./addons/PoweredBy');\n\nvar _PoweredBy2 = _interopRequireDefault(_PoweredBy);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _results = require('../../styles/results');\n\nvar _Card = require('../../styles/Card');\n\nvar _ListItem = require('../../styles/ListItem');\n\nvar _utils = require('../../utils');\n\nvar _Results = require('./addons/Results');\n\nvar _Results2 = _interopRequireDefault(_Results);\n\nvar _ComponentWrapper = require('../basic/ComponentWrapper');\n\nvar _ComponentWrapper2 = _interopRequireDefault(_ComponentWrapper);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /** @jsx jsx */\n\n\nvar ReactiveList = function (_Component) {\n\t_inherits(ReactiveList, _Component);\n\n\tfunction ReactiveList(props) {\n\t\t_classCallCheck(this, ReactiveList);\n\n\t\t// no support for pagination and aggregationField together\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\tif (props.pagination && props.aggregationField) {\n\t\t\tconsole.warn('Pagination is not supported when aggregationField is present. The list will be rendered with infinite scroll');\n\t\t}\n\n\t\tvar currentPage = 0;\n\t\tif (_this.props.defaultPage >= 0) {\n\t\t\tcurrentPage = _this.props.defaultPage;\n\t\t} else if (_this.props.currentPage) {\n\t\t\tcurrentPage = Math.max(_this.props.currentPage - 1, 0);\n\t\t}\n\t\t_this.initialFrom = currentPage * props.size; // used for page resetting on query change\n\t\t_this.shouldRenderPagination = props.pagination && !props.aggregationField;\n\t\t_this.state = {\n\t\t\tfrom: _this.initialFrom,\n\t\t\tcurrentPage: currentPage\n\t\t};\n\t\t_this.internalComponent = (0, _transform.getInternalComponentID)(props.componentId);\n\t\t_this.sortOptionIndex = _this.props.defaultSortOption ? _this.props.sortOptions.findIndex(function (s) {\n\t\t\treturn s.label === _this.props.defaultSortOption;\n\t\t}) : 0;\n\t\tif (_this.props.urlSortOption) {\n\t\t\t_this.sortOptionIndex = _this.props.sortOptions.findIndex(function (s) {\n\t\t\t\treturn s.label === _this.props.urlSortOption;\n\t\t\t}) || 0;\n\t\t}\n\t\treturn _this;\n\t}\n\n\tReactiveList.prototype.componentDidMount = function componentDidMount() {\n\t\tvar _props = this.props,\n\t\t    aggregationField = _props.aggregationField,\n\t\t    distinctField = _props.distinctField,\n\t\t    distinctFieldConfig = _props.distinctFieldConfig,\n\t\t    index = _props.index,\n\t\t    enableAppbase = _props.enableAppbase;\n\n\n\t\tif (enableAppbase && aggregationField) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): The `aggregationField` prop has been marked as deprecated, please use the `distinctField` prop instead.');\n\t\t}\n\t\tif (!enableAppbase && (distinctField || distinctFieldConfig)) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `distinctField` and `distinctFieldConfig` props, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\t\tif (!enableAppbase && index) {\n\t\t\tconsole.warn('Warning(ReactiveSearch): In order to use the `index` prop, the `enableAppbase` prop must be set to true in `ReactiveBase`.');\n\t\t}\n\n\t\tvar options = (0, _helper.getQueryOptions)(this.props);\n\t\toptions.from = this.state.from;\n\t\tif (this.props.sortOptions) {\n\t\t\tvar _ref;\n\n\t\t\tvar sortField = this.props.sortOptions[this.sortOptionIndex].dataField;\n\t\t\tvar sortBy = this.props.sortOptions[this.sortOptionIndex].sortBy;\n\t\t\toptions.sort = [(_ref = {}, _ref[sortField] = {\n\t\t\t\torder: sortBy\n\t\t\t}, _ref)];\n\t\t\t// To handle sort options for RS API\n\t\t\tthis.props.updateComponentProps(this.props.componentId, Object.assign({}, this.props, { dataField: sortField }, { sortBy: sortBy }, this.absProps), _constants.componentTypes.reactiveList);\n\t\t} else if (this.props.sortBy) {\n\t\t\tvar _ref2;\n\n\t\t\toptions.sort = [(_ref2 = {}, _ref2[this.props.dataField] = {\n\t\t\t\torder: this.props.sortBy\n\t\t\t}, _ref2)];\n\t\t}\n\n\t\t// Override sort query with defaultQuery's sort if defined\n\t\tthis.defaultQuery = null;\n\t\tif (this.props.defaultQuery) {\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\t\t\toptions = _extends({}, options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n\t\t}\n\n\t\tvar _ref3 = this.defaultQuery || {},\n\t\t    query = _ref3.query;\n\n\t\t// execute is set to false at the time of mount\n\t\t// to avoid firing (multiple) partial queries.\n\t\t// Hence we are building the query in parts here\n\t\t// and only executing it with setReact() at core\n\n\n\t\tvar execute = false;\n\n\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), execute);\n\n\t\tif (this.defaultQuery) {\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, execute);\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n\t\t} else {\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: null\n\t\t\t}, execute);\n\t\t}\n\n\t\tthis.domNode = window;\n\t\tif (this.showInfiniteScroll) {\n\t\t\tvar scrollTarget = this.props.scrollTarget;\n\n\t\t\tif (typeof scrollTarget === 'string' || scrollTarget instanceof String) {\n\t\t\t\tthis.domNode = document.getElementById(scrollTarget);\n\t\t\t} else if (scrollTarget instanceof Element || scrollTarget instanceof HTMLDocument) {\n\t\t\t\tthis.domNode = scrollTarget;\n\t\t\t}\n\t\t\tthis.domNode.addEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n\t\tvar _this2 = this;\n\n\t\tvar totalPages = Math.ceil(this.props.total / this.props.size) || 0;\n\t\tif (this.props.onData) {\n\t\t\t(0, _helper.checkSomePropChange)(this.props, prevProps, ['hits', 'promotedResults', 'customData', 'total', 'size', 'time', 'hidden'], function () {\n\t\t\t\t_this2.props.onData(_this2.getData());\n\t\t\t});\n\t\t}\n\t\tif (!(0, _helper.isEqual)(this.props.sortOptions, prevProps.sortOptions) || this.props.sortBy !== prevProps.sortBy || this.props.size !== prevProps.size || !(0, _helper.isEqual)(this.props.dataField, prevProps.dataField) || !(0, _helper.isEqual)(this.props.includeFields, prevProps.includeFields) || !(0, _helper.isEqual)(this.props.excludeFields, prevProps.excludeFields)) {\n\t\t\tvar options = (0, _helper.getQueryOptions)(this.props);\n\t\t\toptions.from = this.state.from;\n\t\t\tif (this.props.sortOptions) {\n\t\t\t\tvar _ref4;\n\n\t\t\t\toptions.sort = [(_ref4 = {}, _ref4[this.props.sortOptions[this.sortOptionIndex].dataField] = {\n\t\t\t\t\torder: this.props.sortOptions[this.sortOptionIndex].sortBy\n\t\t\t\t}, _ref4)];\n\t\t\t} else if (this.props.sortBy) {\n\t\t\t\tvar _ref5;\n\n\t\t\t\toptions.sort = [(_ref5 = {}, _ref5[this.props.dataField] = {\n\t\t\t\t\torder: this.props.sortBy\n\t\t\t\t}, _ref5)];\n\t\t\t}\n\t\t\tthis.props.setQueryOptions(this.props.componentId, _extends({}, options, this.getAggsQuery()), true);\n\t\t}\n\n\t\tif (this.props.defaultQuery && !(0, _helper.isEqual)(this.props.defaultQuery(), this.defaultQuery)) {\n\t\t\tvar _options = (0, _helper.getQueryOptions)(this.props);\n\t\t\t_options.from = 0;\n\t\t\tthis.defaultQuery = this.props.defaultQuery();\n\t\t\t// Update calculated default query in store\n\t\t\t(0, _helper.updateDefaultQuery)(this.props.componentId, this.props);\n\n\t\t\tvar query = this.defaultQuery.query;\n\n\n\t\t\tvar queryOptions = (0, _helper.getOptionsFromQuery)(this.defaultQuery);\n\t\t\tif (queryOptions) {\n\t\t\t\t_options = _extends({}, _options, (0, _helper.getOptionsFromQuery)(this.defaultQuery));\n\t\t\t\tthis.props.setQueryOptions(this.props.componentId, _options, !query);\n\t\t\t}\n\n\t\t\tthis.props.updateQuery({\n\t\t\t\tcomponentId: this.internalComponent,\n\t\t\t\tquery: query\n\t\t\t}, true);\n\n\t\t\t// reset page because of query change\n\t\t\t// eslint-disable-next-line\n\t\t\tthis.setState({\n\t\t\t\tcurrentPage: 0,\n\t\t\t\tfrom: 0\n\t\t\t}, function () {\n\t\t\t\t_this2.updatePageURL(0);\n\t\t\t});\n\t\t}\n\n\t\tif (this.shouldRenderPagination) {\n\t\t\t// called when page is changed\n\t\t\tif (this.props.isLoading && (this.props.hits || prevProps.hits)) {\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(this.state.currentPage + 1, totalPages);\n\t\t\t\t} else if (this.props.scrollOnChange && this.props.pagination) {\n\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.props.currentPage !== prevProps.currentPage && this.props.currentPage > 0 && this.props.currentPage <= totalPages) {\n\t\t\t\tthis.setPage(this.props.currentPage - 1);\n\t\t\t}\n\t\t}\n\n\t\tif (this.showInfiniteScroll) {\n\t\t\tif (this.props.hits && prevProps.hits) {\n\t\t\t\tif (\n\t\t\t\t// new items are loaded (from: 0)\n\t\t\t\tthis.props.hits.length < prevProps.hits.length\n\t\t\t\t// new items are loaded and 'from' hasn't changed\n\t\t\t\t|| this.props.hits.length === prevProps.hits.length && this.props.hits !== prevProps.hits) {\n\t\t\t\t\t// query has changed\n\t\t\t\t\tif (this.props.scrollOnChange) {\n\t\t\t\t\t\tthis.scrollToTop();\n\t\t\t\t\t}\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tfrom: 0\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (prevProps.queryLog && this.props.queryLog && prevProps.queryLog !== this.props.queryLog) {\n\t\t\t// usecase:\n\t\t\t// - query has changed from non-null prev query\n\n\t\t\tif (this.props.queryLog.from !== this.state.from) {\n\t\t\t\t// query's 'from' key doesn't match the state's 'from' key,\n\t\t\t\t// i.e. this query change was not triggered by the page change (loadMore)\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.setState({\n\t\t\t\t\tcurrentPage: 0\n\t\t\t\t}, function () {\n\t\t\t\t\t_this2.updatePageURL(0);\n\t\t\t\t});\n\n\t\t\t\tif (this.props.onPageChange) {\n\t\t\t\t\tthis.props.onPageChange(1, totalPages);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// handle window url history change (on native back and forth interactions)\n\t\tif (this.state.currentPage !== this.props.defaultPage && this.props.defaultPage !== prevProps.defaultPage) {\n\t\t\tthis.setPage(this.props.defaultPage >= 0 ? this.props.defaultPage : 0);\n\t\t}\n\t};\n\n\tReactiveList.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tif (this.domNode) {\n\t\t\tthis.domNode.removeEventListener('scroll', this.scrollHandler);\n\t\t}\n\t};\n\n\t// Calculate results\n\n\n\tReactiveList.prototype.render = function render() {\n\t\tvar _props2 = this.props,\n\t\t    renderItem = _props2.renderItem,\n\t\t    size = _props2.size,\n\t\t    error = _props2.error,\n\t\t    renderPagination = _props2.renderPagination,\n\t\t    analytics = _props2.analytics;\n\t\tvar currentPage = this.state.currentPage;\n\n\t\tvar _getAllData = this.getAllData(),\n\t\t    filteredResults = _getAllData.filteredResults;\n\n\t\tvar paginationProps = {\n\t\t\tpages: this.props.pages,\n\t\t\ttotalPages: Math.ceil(this.props.total / size),\n\t\t\tcurrentPage: this.state.currentPage,\n\t\t\tsetPage: this.setPage,\n\t\t\tshowEndPage: this.props.showEndPage,\n\t\t\tinnerClass: this.props.innerClass,\n\t\t\tfragmentName: this.props.componentId\n\t\t};\n\t\tvar paginationElement = renderPagination ? renderPagination(paginationProps) : (0, _core.jsx)(_Pagination2.default, paginationProps);\n\n\t\tvar base = currentPage * size;\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.isLoading && this.shouldRenderPagination && this.props.loader,\n\t\t\tthis.renderError(),\n\t\t\t(0, _core.jsx)(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{\n\t\t\t\t\tlabelPosition: this.props.sortOptions ? 'right' : 'left',\n\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'resultsInfo')\n\t\t\t\t},\n\t\t\t\tthis.props.sortOptions ? this.renderSortOptions() : null,\n\t\t\t\tthis.props.showResultStats ? this.renderResultStats() : null\n\t\t\t),\n\t\t\t!this.props.isLoading && !error && filteredResults.length === 0 ? this.renderNoResults() : null,\n\t\t\tthis.shouldRenderPagination && ['top', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t(0, _core.jsx)(_Results2.default, {\n\t\t\t\tbase: base,\n\t\t\t\tanalytics: analytics,\n\t\t\t\thasCustomRender: this.hasCustomRenderer,\n\t\t\t\tgetComponent: this.getComponent,\n\t\t\t\tlistClass: this.props.listClass,\n\t\t\t\tinnerClass: this.props.innerClass,\n\t\t\t\trenderItem: renderItem,\n\t\t\t\ttriggerClickAnalytics: this.triggerClickAnalytics,\n\t\t\t\tfilteredResults: filteredResults\n\t\t\t}),\n\t\t\tthis.props.showLoader && this.props.isLoading && this.showInfiniteScroll ? this.props.loader || (0, _core.jsx)(\n\t\t\t\t'div',\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\tmargin: '20px 0',\n\t\t\t\t\t\tcolor: '#666'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t'Loading...'\n\t\t\t) // prettier-ignore\n\t\t\t: null,\n\t\t\tthis.shouldRenderPagination && ['bottom', 'both'].indexOf(this.props.paginationAt) !== -1 ? paginationElement : null,\n\t\t\t(0, _core.jsx)(_PoweredBy2.default, {\n\t\t\t\tshow: !!(this.props.config.url.endsWith('appbase.io') && filteredResults.length),\n\t\t\t\tinnerClass: this.props.innerClass\n\t\t\t})\n\t\t);\n\t};\n\n\t_createClass(ReactiveList, [{\n\t\tkey: 'stats',\n\t\tget: function get() {\n\t\t\tvar currentPage = this.state.currentPage;\n\n\t\t\tvar _getAllData2 = this.getAllData(),\n\t\t\t    filteredResults = _getAllData2.filteredResults;\n\n\t\t\treturn _extends({}, (0, _helper.getResultStats)(this.props), {\n\t\t\t\tcurrentPage: currentPage,\n\t\t\t\tdisplayedResults: filteredResults.length\n\t\t\t});\n\t\t}\n\t\t// Returns the props without default props to apply search relevancy settings for RS API\n\n\t}, {\n\t\tkey: 'absProps',\n\t\tget: function get() {\n\t\t\tvar _props$originalProps = this.props.originalProps,\n\t\t\t    includeFields = _props$originalProps.includeFields,\n\t\t\t    excludeFields = _props$originalProps.excludeFields,\n\t\t\t    size = _props$originalProps.size;\n\n\t\t\treturn {\n\t\t\t\tincludeFields: includeFields || undefined,\n\t\t\t\texcludeFields: excludeFields || undefined,\n\t\t\t\tsize: size || undefined\n\t\t\t};\n\t\t}\n\t}, {\n\t\tkey: 'showInfiniteScroll',\n\t\tget: function get() {\n\t\t\t// Pagination has higher priority then infinite scroll\n\t\t\tvar infiniteScroll = this.props.infiniteScroll;\n\n\t\t\treturn infiniteScroll && !this.shouldRenderPagination;\n\t\t}\n\t}, {\n\t\tkey: 'hasCustomRenderer',\n\t\tget: function get() {\n\t\t\treturn (0, _utils.hasCustomRenderer)(this.props);\n\t\t}\n\n\t\t// only used for SSR\n\n\t}]);\n\n\treturn ReactiveList;\n}(_react.Component);\n\nReactiveList.ResultCardsWrapper = function (_ref6) {\n\tvar children = _ref6.children,\n\t    rest = _objectWithoutProperties(_ref6, ['children']);\n\n\treturn (0, _core.jsx)(\n\t\t'div',\n\t\t_extends({ css: _Card.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.ResultListWrapper = function (_ref7) {\n\tvar children = _ref7.children,\n\t    rest = _objectWithoutProperties(_ref7, ['children']);\n\n\treturn (0, _core.jsx)(\n\t\t'div',\n\t\t_extends({ css: _ListItem.container }, rest),\n\t\tchildren\n\t);\n};\n\nReactiveList.generateQueryOptions = function (props) {\n\t// simulate default (includeFields and excludeFields) props to generate consistent query\n\tvar options = (0, _helper.getQueryOptions)(_extends({ includeFields: ['*'], excludeFields: [] }, props));\n\tvar size = props.size,\n\t    dataField = props.dataField,\n\t    defaultSortOption = props.defaultSortOption,\n\t    sortOptionsNew = props.sortOptions,\n\t    currentPage = props.currentPage,\n\t    sortBy = props.sortBy;\n\n\toptions.from = currentPage ? (currentPage - 1) * (size || 10) : 0;\n\toptions.size = size || 10;\n\n\tvar getSortOption = function getSortOption() {\n\t\tvar _ref9;\n\n\t\tif (defaultSortOption) {\n\t\t\tvar sortOption = sortOptionsNew.find(function (option) {\n\t\t\t\treturn option.label === defaultSortOption;\n\t\t\t});\n\t\t\tif (sortOption) {\n\t\t\t\tvar _ref8;\n\n\t\t\t\treturn _ref8 = {}, _ref8[sortOption.dataField] = {\n\t\t\t\t\torder: sortOption.sortBy\n\t\t\t\t}, _ref8;\n\t\t\t}\n\t\t}\n\t\treturn _ref9 = {}, _ref9[sortOptionsNew[0].dataField] = {\n\t\t\torder: sortOptionsNew[0].sortBy\n\t\t}, _ref9;\n\t};\n\n\tif (sortOptionsNew) {\n\t\toptions.sort = [getSortOption()];\n\t} else if (sortBy) {\n\t\tvar _ref10;\n\n\t\toptions.sort = [(_ref10 = {}, _ref10[dataField] = {\n\t\t\torder: sortBy\n\t\t}, _ref10)];\n\t}\n\n\treturn options;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.getAggsQuery = function () {\n\t\tvar _props3 = _this3.props,\n\t\t    size = _props3.size,\n\t\t    aggregationField = _props3.aggregationField,\n\t\t    afterKey = _props3.afterKey;\n\n\t\tvar queryOptions = { size: size };\n\t\tif (aggregationField) {\n\t\t\tqueryOptions.aggs = (0, _helper.getCompositeAggsQuery)({\n\t\t\t\tprops: _this3.props,\n\t\t\t\tafter: afterKey ? { after: afterKey } : null,\n\t\t\t\tshowTopHits: true\n\t\t\t}).aggs;\n\t\t}\n\t\treturn queryOptions;\n\t};\n\n\tthis.getAllData = function () {\n\t\tvar _props4 = _this3.props,\n\t\t    size = _props4.size,\n\t\t    promotedResults = _props4.promotedResults,\n\t\t    aggregationData = _props4.aggregationData,\n\t\t    customData = _props4.customData;\n\t\tvar currentPage = _this3.state.currentPage;\n\n\t\tvar results = (0, _helper.parseHits)(_this3.props.hits) || [];\n\t\tvar parsedPromotedResults = (0, _helper.parseHits)(promotedResults) || [];\n\t\tvar filteredResults = results;\n\t\tvar base = currentPage * size;\n\n\t\tif (parsedPromotedResults.length) {\n\t\t\tvar ids = parsedPromotedResults.map(function (item) {\n\t\t\t\treturn item._id;\n\t\t\t}).filter(Boolean);\n\t\t\tif (ids) {\n\t\t\t\tfilteredResults = filteredResults.filter(function (item) {\n\t\t\t\t\treturn !ids.includes(item._id);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfilteredResults = [].concat(parsedPromotedResults, filteredResults);\n\t\t}\n\t\treturn {\n\t\t\tresults: results,\n\t\t\tfilteredResults: filteredResults,\n\t\t\tpromotedResults: parsedPromotedResults,\n\t\t\tcustomData: customData || {},\n\t\t\taggregationData: aggregationData || [],\n\t\t\tloadMore: _this3.loadMore,\n\t\t\tbase: base,\n\t\t\ttriggerClickAnalytics: _this3.triggerClickAnalytics\n\t\t};\n\t};\n\n\tthis.scrollToTop = function () {\n\t\tif (_this3.domNode === window) {\n\t\t\tdocument.documentElement.scrollTop = 0;\n\t\t\tdocument.body.scrollTop = 0;\n\t\t} else {\n\t\t\t_this3.domNode.scrollTop = 0;\n\t\t}\n\t};\n\n\tthis.scrollHandler = function () {\n\t\tvar renderLoader = window.innerHeight + window.pageYOffset + 300 >= document.body.scrollHeight;\n\t\tif (_this3.props.scrollTarget) {\n\t\t\trenderLoader = _this3.domNode.clientHeight + _this3.domNode.scrollTop + 300 >= _this3.domNode.scrollHeight;\n\t\t}\n\t\tif (!_this3.props.isLoading && renderLoader) {\n\t\t\t_this3.loadMore();\n\t\t}\n\t};\n\n\tthis.loadMore = function () {\n\t\tif (_this3.props.aggregationField && !_this3.props.afterKey) return;\n\t\tif (_this3.props.hits && _this3.props.total > _this3.props.hits.length) {\n\t\t\tvar value = _this3.state.from + _this3.props.size;\n\t\t\t// If current hits length is less than the current from then it means\n\t\t\t// that there are no results present.\n\t\t\t// It can happen because of many reasons some of them are:\n\t\t\t// 1. Using the `collapse` query to remove results\n\t\t\t// 2. Shard failure\n\t\t\t// In above cases infinite scroll should not load more results that can\n\t\t\t// cause the resetting of the `from` value\n\n\t\t\tif (_this3.props.hits.length < value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar options = _extends({}, (0, _helper.getQueryOptions)(_this3.props), _this3.getAggsQuery());\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value\n\t\t\t});\n\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\tfrom: value\n\t\t\t}), true, !!_this3.props.aggregationField);\n\t\t}\n\t};\n\n\tthis.setPage = function (page) {\n\t\t// onPageClick will be called everytime a pagination button is clicked\n\t\tif (page !== _this3.state.currentPage) {\n\t\t\tvar onPageClick = _this3.props.onPageClick;\n\n\t\t\tif (onPageClick) {\n\t\t\t\tonPageClick(page + 1);\n\t\t\t}\n\t\t\tvar value = _this3.props.size * page;\n\t\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t\toptions.from = _this3.state.from;\n\t\t\t_this3.setState({\n\t\t\t\tfrom: value,\n\t\t\t\tcurrentPage: page\n\t\t\t}, function () {\n\t\t\t\t_this3.props.loadMore(_this3.props.componentId, _extends({}, options, {\n\t\t\t\t\tfrom: value\n\t\t\t\t}), false);\n\n\t\t\t\t_this3.updatePageURL(page);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.renderResultStats = function () {\n\t\tvar _props5 = _this3.props,\n\t\t    hits = _props5.hits,\n\t\t    promotedResults = _props5.promotedResults,\n\t\t    total = _props5.total;\n\n\n\t\tvar shouldStatsVisible = hits && promotedResults && (hits.length || promotedResults.length);\n\t\tif (_this3.props.renderResultStats && shouldStatsVisible) {\n\t\t\treturn _this3.props.renderResultStats(_this3.stats);\n\t\t} else if (total) {\n\t\t\treturn (0, _core.jsx)(\n\t\t\t\t'p',\n\t\t\t\t{ css: _results.resultStats, className: (0, _helper.getClassName)(_this3.props.innerClass, 'resultStats') },\n\t\t\t\t_this3.props.total,\n\t\t\t\t' results found in ',\n\t\t\t\t_this3.props.time,\n\t\t\t\t'ms'\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.renderNoResults = function () {\n\t\treturn (0, _core.jsx)(\n\t\t\t'div',\n\t\t\t{ className: (0, _helper.getClassName)(_this3.props.innerClass, 'noResults') || null },\n\t\t\t_this3.props.renderNoResults()\n\t\t);\n\t};\n\n\tthis.handleSortChange = function (e) {\n\t\tvar _ref11;\n\n\t\tvar index = e.target.value;\n\t\tvar options = (0, _helper.getQueryOptions)(_this3.props);\n\t\t// This fixes issue #371 (where sorting a multi-result page with infinite loader breaks)\n\t\toptions.from = 0;\n\n\t\tvar sortField = _this3.props.sortOptions[index].dataField;\n\t\tvar sortBy = _this3.props.sortOptions[index].sortBy;\n\t\toptions.sort = [(_ref11 = {}, _ref11[sortField] = {\n\t\t\torder: sortBy\n\t\t}, _ref11)];\n\t\t// To handle sortOptions for RS API\n\t\t_this3.props.updateComponentProps(_this3.props.componentId, Object.assign({}, _this3.props, { dataField: sortField }, { sortBy: sortBy }, _this3.absProps), _constants.componentTypes.reactiveList);\n\t\t_this3.props.setQueryOptions(_this3.props.componentId, options, true);\n\t\t_this3.sortOptionIndex = index;\n\n\t\t_this3.setState({\n\t\t\tcurrentPage: 0,\n\t\t\tfrom: 0\n\t\t}, function () {\n\t\t\t_this3.updatePageURL(0);\n\t\t});\n\t};\n\n\tthis.updatePageURL = function (page) {\n\t\ttry {\n\t\t\tif (_this3.props.sortOptions && _this3.props.sortOptions[_this3.sortOptionIndex]) {\n\t\t\t\tvar sortOption = _this3.props.sortOptions[_this3.sortOptionIndex].label;\n\n\t\t\t\t_this3.props.setPageURL(_this3.props.componentId + 'sortOption', sortOption, _this3.props.componentId + 'sortOption', false, _this3.props.URLParams);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log('error\\', ' + error);\n\t\t}\n\n\t\t_this3.props.setPageURL(_this3.props.componentId, page + 1, _this3.props.componentId, false, _this3.props.URLParams);\n\t};\n\n\tthis.triggerClickAnalytics = function (searchPosition, documentId) {\n\t\tvar docId = documentId;\n\t\tif (!docId) {\n\t\t\tvar _getData = _this3.getData(),\n\t\t\t    data = _getData.data;\n\n\t\t\tvar hitData = data.find(function (hit) {\n\t\t\t\treturn hit._click_id === searchPosition;\n\t\t\t});\n\t\t\tif (hitData && hitData._id) {\n\t\t\t\tdocId = hitData._id;\n\t\t\t}\n\t\t}\n\t\t_this3.props.triggerAnalytics(searchPosition, docId);\n\t};\n\n\tthis.renderSortOptions = function () {\n\t\treturn (0, _core.jsx)(\n\t\t\t'select',\n\t\t\t{\n\t\t\t\tcss: _results.sortOptions,\n\t\t\t\tclassName: (0, _helper.getClassName)(_this3.props.innerClass, 'sortOptions'),\n\t\t\t\tname: 'sort-options',\n\t\t\t\t'aria-label': 'Sort options',\n\t\t\t\tonChange: _this3.handleSortChange,\n\t\t\t\tvalue: _this3.sortOptionIndex\n\t\t\t},\n\t\t\t_this3.props.sortOptions.map(function (sort, index) {\n\t\t\t\treturn (0, _core.jsx)(\n\t\t\t\t\t'option',\n\t\t\t\t\t{ key: sort.label, value: index },\n\t\t\t\t\tsort.label\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t};\n\n\tthis.renderError = function () {\n\t\tvar _props6 = _this3.props,\n\t\t    error = _props6.error,\n\t\t    isLoading = _props6.isLoading,\n\t\t    renderError = _props6.renderError;\n\n\t\tif (renderError && error && !isLoading) {\n\t\t\treturn (0, _utils.isFunction)(renderError) ? renderError(error) : renderError;\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.withClickIds = function (results) {\n\t\tvar _getAllData3 = _this3.getAllData(),\n\t\t    base = _getAllData3.base;\n\n\t\treturn results.map(function (result, index) {\n\t\t\treturn _extends({}, result, {\n\t\t\t\t_click_id: base + index\n\t\t\t});\n\t\t});\n\t};\n\n\tthis.getData = function () {\n\t\tvar _getAllData4 = _this3.getAllData(),\n\t\t    filteredResults = _getAllData4.filteredResults,\n\t\t    promotedResults = _getAllData4.promotedResults,\n\t\t    aggregationData = _getAllData4.aggregationData,\n\t\t    customData = _getAllData4.customData;\n\n\t\treturn {\n\t\t\tdata: _this3.withClickIds(filteredResults),\n\t\t\taggregationData: _this3.withClickIds(aggregationData || []),\n\t\t\tpromotedData: _this3.withClickIds(promotedResults),\n\t\t\tcustomData: customData,\n\t\t\trawData: _this3.props.rawData,\n\t\t\tresultStats: _this3.stats\n\t\t};\n\t};\n\n\tthis.getComponent = function () {\n\t\tvar _props7 = _this3.props,\n\t\t    error = _props7.error,\n\t\t    isLoading = _props7.isLoading;\n\n\t\tvar data = _extends({\n\t\t\terror: error,\n\t\t\tloading: isLoading,\n\t\t\tloadMore: _this3.loadMore,\n\t\t\t// TODO: Remove in v4\n\t\t\ttriggerAnalytics: _this3.triggerClickAnalytics,\n\t\t\ttriggerClickAnalytics: _this3.triggerClickAnalytics\n\t\t}, _this3.getData());\n\t\treturn (0, _utils.getComponent)(data, _this3.props);\n\t};\n};\n\nReactiveList.propTypes = {\n\tloadMore: _types2.default.funcRequired,\n\tonQueryChange: _types2.default.func,\n\tonError: _types2.default.func,\n\tsetPageURL: _types2.default.func,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tsetDefaultQuery: _types2.default.funcRequired,\n\tupdateComponentProps: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tcurrentPage: _types2.default.number,\n\thits: _types2.default.hits,\n\trawData: _types2.default.rawData,\n\tisLoading: _types2.default.bool,\n\tincludeFields: _types2.default.includeFields,\n\tpromotedResults: _types2.default.hits,\n\tcustomData: _types2.default.title,\n\ttime: _types2.default.number,\n\ttotal: _types2.default.number,\n\thidden: _types2.default.number,\n\tconfig: _types2.default.props,\n\tanalytics: _types2.default.bool,\n\tqueryLog: _types2.default.props,\n\terror: _types2.default.title,\n\theaders: _types2.default.headers,\n\tenableAppbase: _types2.default.bool,\n\t// component props\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tchildren: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\taggregationField: _types2.default.string,\n\taggregationSize: _types2.default.number,\n\taggregationData: _types2.default.aggregationData,\n\tdefaultPage: _types2.default.number,\n\tdefaultQuery: _types2.default.func,\n\texcludeFields: _types2.default.excludeFields,\n\tinnerClass: _types2.default.style,\n\tinfiniteScroll: _types2.default.bool,\n\tlistClass: _types2.default.string,\n\tloader: _types2.default.title,\n\trender: _types2.default.func,\n\trenderItem: _types2.default.func,\n\trenderError: _types2.default.title,\n\trenderPagination: _types2.default.func,\n\tonData: _types2.default.func,\n\trenderNoResults: _types2.default.title,\n\tonPageChange: _types2.default.func,\n\tonPageClick: _types2.default.func,\n\tpages: _types2.default.number,\n\tpagination: _types2.default.bool,\n\tpaginationAt: _types2.default.paginationAt,\n\tshowEndPage: _types2.default.bool,\n\treact: _types2.default.react,\n\trenderResultStats: _types2.default.func,\n\tscrollOnChange: _types2.default.bool,\n\tscrollTarget: _types2.default.string,\n\tshowLoader: _types2.default.bool,\n\tshowResultStats: _types2.default.bool,\n\tsize: _types2.default.number,\n\tsortBy: _types2.default.sortBy,\n\tsortOptions: _types2.default.sortOptions,\n\tstyle: _types2.default.style,\n\ttriggerAnalytics: _types2.default.funcRequired,\n\tURLParams: _types2.default.bool,\n\tdefaultSortOption: _types2.default.string,\n\tafterKey: _types2.default.props,\n\tdistinctField: _types2.default.string,\n\tdistinctFieldConfig: _types2.default.componentObject,\n\t// eslint-disable-next-line\n\toriginalProps: _types2.default.any,\n\tindex: _types2.default.string,\n\turlSortOption: _types2.default.string\n};\n\nReactiveList.defaultProps = {\n\tclassName: null,\n\tcurrentPage: 0,\n\tlistClass: '',\n\tpages: 5,\n\tinfiniteScroll: true,\n\tpagination: false,\n\tanalytics: false,\n\tpaginationAt: 'bottom',\n\tshowEndPage: false,\n\tincludeFields: ['*'],\n\texcludeFields: [],\n\tshowResultStats: true,\n\tsize: 10,\n\tstyle: {},\n\tURLParams: false,\n\tshowLoader: true,\n\trenderNoResults: function renderNoResults() {\n\t\treturn 'No Results found.';\n\t},\n\tscrollOnChange: true,\n\tdefaultSortOption: null,\n\toriginalProps: {}\n};\n\n// Add componentType for SSR\nReactiveList.componentType = _constants.componentTypes.reactiveList;\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tdefaultPage: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value - 1 || -1,\n\t\turlSortOption: state.selectedValues[props.componentId + 'sortOption'] && state.selectedValues[props.componentId + 'sortOption'].value,\n\t\thits: state.hits[props.componentId] && state.hits[props.componentId].hits,\n\t\trawData: state.rawData[props.componentId],\n\t\tanalytics: state.config && state.config.analytics,\n\t\taggregationData: state.compositeAggregations[props.componentId],\n\t\tisLoading: state.isLoading[props.componentId] || false,\n\t\ttime: state.hits[props.componentId] && state.hits[props.componentId].time || 0,\n\t\ttotal: state.hits[props.componentId] && state.hits[props.componentId].total,\n\t\thidden: state.hits[props.componentId] && state.hits[props.componentId].hidden,\n\t\tconfig: state.config,\n\t\tenableAppbase: state.config.enableAppbase,\n\t\tqueryLog: state.queryLog[props.componentId],\n\t\terror: state.error[props.componentId],\n\t\tpromotedResults: state.promotedResults[props.componentId] || [],\n\t\tcustomData: state.customData[props.componentId],\n\t\tafterKey: state.aggregations[props.componentId] && state.aggregations[props.componentId][props.aggregationField] && state.aggregations[props.componentId][props.aggregationField].after_key\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\tsetDefaultQuery: function setDefaultQuery(component, query) {\n\t\t\treturn dispatch((0, _actions.setDefaultQuery)(component, query));\n\t\t},\n\t\tupdateComponentProps: function updateComponentProps(component, options, componentType) {\n\t\t\treturn dispatch((0, _actions.updateComponentProps)(component, options, componentType));\n\t\t},\n\t\tloadMore: function loadMore(component, options, append, appendAggs) {\n\t\t\treturn dispatch((0, _actions.loadMore)(component, options, append, appendAggs));\n\t\t},\n\t\tsetPageURL: function setPageURL(component, value, label, showFilter, URLParams) {\n\t\t\treturn dispatch((0, _actions.setValue)(component, value, label, showFilter, URLParams));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject, execute) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject, execute));\n\t\t},\n\t\ttriggerAnalytics: function triggerAnalytics(searchPosition, docId) {\n\t\t\treturn dispatch((0, _actions.recordResultClick)(searchPosition, docId));\n\t\t}\n\t};\n};\n\nvar ConnectedComponent = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(function (props) {\n\treturn (0, _core.jsx)(\n\t\t_ComponentWrapper2.default,\n\t\t_extends({ internalComponent: true, componentType: _constants.componentTypes.reactiveList }, props),\n\t\tfunction () {\n\t\t\tvar includeFields = props.includeFields,\n\t\t\t    excludeFields = props.excludeFields,\n\t\t\t    size = props.size;\n\n\t\t\treturn (0, _core.jsx)(ReactiveList, _extends({\n\t\t\t\tref: props.myForwardedRef\n\t\t\t}, props, {\n\t\t\t\toriginalProps: {\n\t\t\t\t\tincludeFields: includeFields,\n\t\t\t\t\texcludeFields: excludeFields,\n\t\t\t\t\tsize: size\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t);\n}));\n\n// eslint-disable-next-line\nvar ForwardRefComponent = _react2.default.forwardRef(function (props, ref) {\n\treturn (0, _core.jsx)(ConnectedComponent, _extends({}, props, { myForwardedRef: ref }));\n});\n(0, _hoistNonReactStatics2.default)(ForwardRefComponent, ReactiveList);\n\nForwardRefComponent.displayName = 'ReactiveList';\nexports.default = ForwardRefComponent;"]},"metadata":{},"sourceType":"script"}